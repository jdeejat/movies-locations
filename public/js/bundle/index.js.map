{"mappings":"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","sources":["public/js/alert.js","public/js/login.js","public/js/signup.js","public/js/mapbox.js","public/js/changeAccount.js","public/js/loadMore.js","public/js/index.js","public/js/logout.js"],"sourcesContent":["/* eslint-disable */\n\nexport const hideAlert = () => {\n  const alert = document.querySelector('.alert');\n  if (alert) alert.parentElement.removeChild(alert);\n};\n\n// type is success or error\nexport const showAlert = (type, msg) => {\n  hideAlert();\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\n  window.setTimeout(hideAlert, 5000);\n};\n","/* eslint-disable */\nimport { showAlert } from './alert';\nimport fetch from 'node-fetch';\n\n// // TESTING DOM elements\n// const loginForm = document.querySelector('.form');\n\nexport const login = async (email, password) => {\n  // Send a POST request\n  const request = await fetch('/api/v1/users/login', {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      email,\n      password,\n    }),\n  });\n  const response = await request.json();\n  if (response.status === 'success') {\n    // show alert\n    showAlert('success', 'You are now logged in');\n    // go to home page\n    setTimeout(() => {\n      location.assign('/');\n    }, 1000);\n  } else {\n    showAlert('error', response.message);\n  }\n};\n\n// // TESTIN add event listener to the .form element\n// if (loginForm) {\n//   loginForm.addEventListener('submit', (e) => {\n//     e.preventDefault();\n//     // get email and password by id\n//     const email = document.getElementById('email').value;\n//     const password = document.getElementById('password').value;\n//     login(email, password);\n//   });\n// }\n\n///////////////////////\n// OLD AXIOS VERSION\n///////////////////////\n\n//import axios from 'axios';\n\n// export const login = async (email, password) => {\n//   try {\n//     // Send a POST request\n//     const response = await axios({\n//       method: 'post',\n//       url: 'http://localhost:3000/api/v1/users/login',\n//       data: {\n//         email,\n//         password,\n//       },\n//     });\n//     if (response.data.status === 'success') {\n//       // go to home page\n//       setTimeout(() => {\n//         location.assign('/');\n//       }, 500);\n//     }\n//   } catch (error) {\n//     alert(error.response.data.message);\n//   }\n// };\n","/* eslint-disable */\nimport { showAlert } from './alert';\nimport fetch from 'node-fetch';\n\n// // TESTING DOM elements\n// const loginForm = document.querySelector('.form');\n\nexport const signup = async (name, email, password, passwordConfirm) => {\n  // Send a POST request\n  const request = await fetch('/api/v1/users/signup', {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      name,\n      email,\n      password,\n      passwordConfirm,\n    }),\n  });\n  const response = await request.json();\n  if (response.status === 'success') {\n    // show alert\n    showAlert('success', 'You now have an account');\n    // go to home page\n    setTimeout(() => {\n      location.assign('/');\n    }, 1000);\n  } else {\n    showAlert('error', response.message);\n  }\n};\n","/* eslint-disable */\n\nexport const initMapbox = (locations) => {\n  mapboxgl.accessToken =\n    'pk.eyJ1IjoiamRlZWphdCIsImEiOiJjbDdkN3J5bncwazhvM3ZvbDJ3Mjl3dGh2In0.MqeSMRvJZuR5gu7Ndwww-A';\n  const map = new mapboxgl.Map({\n    container: 'map', // container ID\n    style: 'mapbox://styles/jdeejat/cj20he7w700402rmjs5zfkwlj', // style URL\n    // scrollZoom: false,\n    cooperativeGestures: true,\n\n    //   center: [-74.5, 40], // starting position [lng, lat]\n    //   zoom: 9, // starting zoom\n    //   projection: 'globe', // display the map as a 3D globe\n    //interactive: false, // disable map interactivity\n    // more details https://docs.mapbox.com/mapbox-gl-js/api/map/\n  });\n  map.on('style.load', () => {\n    map.setFog({}); // Set the default atmosphere style\n  });\n  map.addControl(new mapboxgl.FullscreenControl());\n\n  const bounds = new mapboxgl.LngLatBounds();\n\n  locations.forEach((loc) => {\n    // create marker\n    const el = document.createElement('div');\n    el.className = 'marker';\n\n    // add marker\n    new mapboxgl.Marker({\n      element: el,\n      anchor: 'bottom',\n    })\n      .setLngLat(loc.coordinates)\n      .setPopup(\n        new mapboxgl.Popup({ offset: 25 }) // add popups\n          .setHTML(\n            `<a href='${loc.googleMapsLink}' target=\"_blank\">${loc.pointName}</a>`\n          )\n      )\n      .addTo(map);\n\n    // add popup OLD\n    // new mapboxgl.Popup({ offset: 25 })\n    //   .setLngLat(loc.coordinates)\n    //   .setHTML(\n    //     `<a href='${loc.googleMapsLink}' target=\"_blank\">${loc.pointName}</a>`\n    //   )\n    //   .addTo(map);\n\n    // extend map bounds to include current location\n    bounds.extend(loc.coordinates);\n  });\n\n  map.fitBounds(bounds, {\n    padding: {\n      top: 200,\n      bottom: 150,\n      left: 100,\n      right: 100,\n    },\n  });\n};\n","/* eslint-disable */\nimport { showAlert } from './alert';\nimport fetch from 'node-fetch';\n\nexport const userChange = async (form, name) => {\n  // Send a POST request\n  // dev url http://localhost:3000/api/v1/users/updateMe\n  const request = await fetch('/api/v1/users/updateMe', {\n    method: 'PATCH',\n    body: form,\n  });\n  const response = await request.json();\n  if (response.status === 'success') {\n    // show alert\n    showAlert('success', 'Data updated');\n  } else {\n    showAlert('error', response.message);\n  }\n};\n\nexport const passwordChange = async (\n  currentPassword,\n  newPassword,\n  newPasswordConfirm\n) => {\n  // Send a POST request\n  const request = await fetch('/api/v1/users/updatePassword', {\n    method: 'PATCH',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      currentPassword,\n      newPassword,\n      newPasswordConfirm,\n    }),\n  });\n  const response = await request.json();\n  if (response.status === 'success') {\n    // show alert\n    showAlert('success', 'Password updated');\n  } else {\n    showAlert('error', response.message);\n  }\n};\n","/* eslint-disable */\nimport { showAlert } from './alert';\nimport fetch from 'node-fetch';\n\nexport const loadMore = async (page = 0, limit = 12) => {\n  // fetch data from the api\n  const request = await fetch(`/?limit=${limit}&page=${page}`, {\n    method: 'GET',\n  });\n\n  return await request.text();\n};\n","/* eslint-disable */\nimport 'core-js/stable';\nimport { login } from './login';\nimport { signup } from './signup';\nimport { logout } from './logout';\nimport { initMapbox } from './mapbox';\nimport { userChange, passwordChange } from './changeAccount';\nimport { loadMore } from './loadMore';\n\n// DOM elements\nconst mapBox = document.getElementById('map');\nconst loginForm = document.querySelector('.form--login');\nconst signupForm = document.querySelector('.form--signup');\nconst logoutBtn = document.querySelector('.nav__el--logout');\nconst userDataForm = document.querySelector('.form-user-data');\nconst userPasswordForm = document.querySelector('.form-user-password');\nconst loadMoreBtn = document.getElementById('load-more');\n\n// INITIALIZE MAPBOX\nif (mapBox) {\n  const locations = JSON.parse(mapBox.dataset.locations);\n  initMapbox(locations);\n}\n\n// add event listener to the .form element\nif (loginForm)\n  loginForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n    // get email and password by id\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    login(email, password);\n  });\n\n// sign up\nif (signupForm)\n  signupForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n    // get name email password and passwordConfirm by id\n    const name = document.getElementById('name').value;\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    const passwordConfirm = document.getElementById('passwordConfirm').value;\n    signup(name, email, password, passwordConfirm);\n  });\n\nif (logoutBtn)\n  // add event listener to the .nav__el--logout element\n  logoutBtn.addEventListener('click', logout);\n\n// add event listener to the .form-user-data element\nif (userDataForm)\n  userDataForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const form = new FormData();\n    form.append('name', document.getElementById('name').value);\n    form.append('email', document.getElementById('email').value);\n    form.append('photo', document.getElementById('photo').files[0]);\n\n    userChange(form);\n  });\n\n// add event listener to the .form-user-data element\nif (userPasswordForm)\n  userPasswordForm.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    // change value of .btn--save-password to 'Updating...'\n    document.querySelector('.btn--save-password').textContent = 'Updating...';\n    // get password fields by id\n    const currentPassword = document.getElementById('password-current').value;\n    const newPassword = document.getElementById('password').value;\n    const newPasswordConfirm =\n      document.getElementById('password-confirm').value;\n\n    await passwordChange(currentPassword, newPassword, newPasswordConfirm);\n    // change value of .btn--save-password to 'Save password'\n    document.querySelector('.btn--save-password').textContent = 'Save password';\n    // clear password fields\n    document.getElementById('password-current').value = '';\n    document.getElementById('password').value = '';\n    document.getElementById('password-confirm').value = '';\n  });\n\n// load more\nif (loadMoreBtn) {\n  loadMoreBtn.addEventListener('click', async () => {\n    const loadPage = loadMoreBtn.dataset.page * 1 + 1;\n    const moreMovies = await loadMore(loadPage);\n    // insert data into the DOM card-container\n    document\n      .querySelector('.card-container')\n      .insertAdjacentHTML('beforeend', moreMovies);\n    // increment page number\n    loadMoreBtn.dataset.page = loadPage;\n  });\n}\n","/* eslint-disable */\nimport { showAlert } from './alert';\nimport fetch from 'node-fetch';\n\n// // TESTING DOM elements\n// const loginForm = document.querySelector('.form');\n\nexport const logout = async () => {\n  // Send a POST request\n  const request = await fetch('/api/v1/users/logout', {\n    method: 'GET',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n  });\n  const response = await request.json();\n  if (response.status === 'success') {\n    showAlert('success', 'You are now logged out');\n    setTimeout(() => {\n      location.reload(true);\n    }, 2000);\n  } else {\n    showAlert('error', 'Something went wrong. Try again!');\n  }\n};\n"],"names":["$f59cd7e46bde6893$export$516836c6a9dfc573","alert","document","querySelector","parentElement","removeChild","$f59cd7e46bde6893$export$de026b00723010c1","type","msg","markup","insertAdjacentHTML","window","setTimeout","$0315bd7294d9d218$export$596d806903d1f59e","async","email","password","request","$parcel$interopDefault","$eZBjq$nodefetch","method","headers","Accept","body","JSON","stringify","response","json","status","location","assign","message","$eccefff4e9857100$export$7200a869094fec36","name","passwordConfirm","$85e443efb8406c80$export$2180ffca888e302a","locations","mapboxgl","accessToken","map","Map","container","style","cooperativeGestures","on","setFog","addControl","FullscreenControl","bounds","LngLatBounds","forEach","loc","el","createElement","className","Marker","element","anchor","setLngLat","coordinates","setPopup","Popup","offset","setHTML","googleMapsLink","pointName","addTo","extend","fitBounds","padding","top","bottom","left","right","$5a423344f669847b$export$69c31d9c55da2a9d","form","$5a423344f669847b$export$4f6a6a61ca2ea38","currentPassword","newPassword","newPasswordConfirm","$b81be7b5c7346253$export$b346ae7c9d204e07","page","limit","text","$fd92795a17b2bacb$var$mapBox","getElementById","$fd92795a17b2bacb$var$loginForm","$fd92795a17b2bacb$var$signupForm","$fd92795a17b2bacb$var$logoutBtn","$fd92795a17b2bacb$var$userDataForm","$fd92795a17b2bacb$var$userPasswordForm","$fd92795a17b2bacb$var$loadMoreBtn","parse","dataset","addEventListener","e","preventDefault","value","reload","FormData","append","files","textContent","loadPage","moreMovies"],"version":3,"file":"index.js.map","sourceRoot":"../../../"}