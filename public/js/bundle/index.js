<<<<<<< HEAD
var e=require("node-fetch");function t(e){return e&&e.__esModule?e.default:e}const a=()=>{const e=document.querySelector(".alert");e&&e.parentElement.removeChild(e)},o=(e,t)=>{a();const o=`<div class="alert alert--${e}">${t}</div>`;document.querySelector("body").insertAdjacentHTML("afterbegin",o),window.setTimeout(a,5e3)},n=async(a,n)=>{const s=await t(e)("/api/v1/users/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:a,password:n})}),d=await s.json();"success"===d.status?(o("success","You are now logged in"),setTimeout((()=>{location.assign("/")}),1e3)):o("error",d.message)},s=async(a,n,s,d)=>{const r=await t(e)("/api/v1/users/signup",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:a,email:n,password:s,passwordConfirm:d})}),c=await r.json();"success"===c.status?(o("success","You now have an account"),setTimeout((()=>{location.assign("/")}),1e3)):o("error",c.message)},d=e=>{mapboxgl.accessToken="pk.eyJ1IjoiamRlZWphdCIsImEiOiJjbDdkN3J5bncwazhvM3ZvbDJ3Mjl3dGh2In0.MqeSMRvJZuR5gu7Ndwww-A";const t=new mapboxgl.Map({container:"map",style:"mapbox://styles/jdeejat/cj20he7w700402rmjs5zfkwlj",cooperativeGestures:!0});t.on("style.load",(()=>{t.setFog({})})),t.addControl(new mapboxgl.FullscreenControl);const a=new mapboxgl.LngLatBounds;e.forEach((e=>{const o=document.createElement("div");o.className="marker",new mapboxgl.Marker({element:o,anchor:"bottom"}).setLngLat(e.coordinates).setPopup(new mapboxgl.Popup({offset:25}).setHTML(`<a href='${e.googleMapsLink}' target="_blank">${e.pointName}</a>`)).addTo(t),a.extend(e.coordinates)})),t.fitBounds(a,{padding:{top:200,bottom:150,left:100,right:100}})},r=async(a,n)=>{const s=await t(e)("/api/v1/users/updateMe",{method:"PATCH",body:a}),d=await s.json();"success"===d.status?o("success","Data updated"):o("error",d.message)},c=async(a,n,s)=>{const d=await t(e)("/api/v1/users/updatePassword",{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({currentPassword:a,newPassword:n,newPasswordConfirm:s})}),r=await d.json();"success"===r.status?o("success","Password updated"):o("error",r.message)},u=async(a=0,o=9)=>{const n=await t(e)(`/?limit=${o}&page=${a}`,{method:"GET"});return await n.text()},i=document.getElementById("map"),l=document.querySelector(".form--login"),m=document.querySelector(".form--signup"),p=document.querySelector(".nav__el--logout"),g=document.querySelector(".form-user-data"),w=document.querySelector(".form-user-password"),y=document.getElementById("load-more");if(i){d(JSON.parse(i.dataset.locations))}l&&l.addEventListener("submit",(e=>{e.preventDefault();const t=document.getElementById("email").value,a=document.getElementById("password").value;n(t,a)})),m&&m.addEventListener("submit",(e=>{e.preventDefault();const t=document.getElementById("name").value,a=document.getElementById("email").value,o=document.getElementById("password").value,n=document.getElementById("passwordConfirm").value;s(t,a,o,n)})),p&&p.addEventListener("click",(async()=>{const a=await t(e)("/api/v1/users/logout",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});"success"===(await a.json()).status?(o("success","You are now logged out"),setTimeout((()=>{location.reload(!0)}),2e3)):o("error","Something went wrong. Try again!")})),g&&g.addEventListener("submit",(e=>{e.preventDefault();const t=new FormData;t.append("name",document.getElementById("name").value),t.append("email",document.getElementById("email").value),t.append("photo",document.getElementById("photo").files[0]),r(t)})),w&&w.addEventListener("submit",(async e=>{e.preventDefault(),document.querySelector(".btn--save-password").textContent="Updating...";const t=document.getElementById("password-current").value,a=document.getElementById("password").value,o=document.getElementById("password-confirm").value;await c(t,a,o),document.querySelector(".btn--save-password").textContent="Save password",document.getElementById("password-current").value="",document.getElementById("password").value="",document.getElementById("password-confirm").value=""})),y&&y.addEventListener("click",(async()=>{const e=1*y.dataset.page+1,t=await u(e);document.querySelector(".card-container").insertAdjacentHTML("beforeend",t),y.dataset.page=e}));
=======
var t,e,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o=function(t){return t&&t.Math==Math&&t};n=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof r&&r)||function(){return this}()||Function("return this")();var i,a;i=!(a=function(t){try{return!!t()}catch(t){return!0}})((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}));var c,u={};c=!a((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}));var s,f=Function.prototype.call;u=c?f.bind(f):function(){return f.apply(f,arguments)};var l={}.propertyIsEnumerable,p=Object.getOwnPropertyDescriptor,v=p&&!l.call({1:2},1);s=v?function(t){var e=p(this,t);return!!e&&e.enumerable}:l;var d;d=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}};var y,h,m={},g={},b=Function.prototype,w=b.bind,j=b.call,E=c&&w.bind(j,j),S=(g=c?function(t){return t&&E(t)}:function(t){return t&&function(){return j.apply(t,arguments)}})({}.toString),T=g("".slice);h=function(t){return T(S(t),8,-1)};var O=Object,A=g("".split);m=a((function(){return!O("z").propertyIsEnumerable(0)}))?function(t){return"String"==h(t)?A(t,""):O(t)}:O;var P,C;C=function(t){return null==t};var I=TypeError;P=function(t){if(C(t))throw I("Can't call method on "+t);return t},y=function(t){return m(P(t))};var R,M,_,x={};_=function(t){return"function"==typeof t};var N="object"==typeof document&&document.all;x=void 0===N&&void 0!==N?function(t){return"object"==typeof t?null!==t:_(t)||t===N}:function(t){return"object"==typeof t?null!==t:_(t)};var k,B={},F=function(t){return _(t)?t:void 0};k=function(t,e){return arguments.length<2?F(n[t]):n[t]&&n[t][e]};var D={};D=g({}.isPrototypeOf);var L,U,q,G={};G=k("navigator","userAgent")||"";var J,W,z=n.process,V=n.Deno,Y=z&&z.versions||V&&V.version,$=Y&&Y.v8;$&&(W=(J=$.split("."))[0]>0&&J[0]<4?1:+(J[0]+J[1])),!W&&G&&(!(J=G.match(/Edge\/(\d+)/))||J[1]>=74)&&(J=G.match(/Chrome\/(\d+)/))&&(W=+J[1]),q=W,U=!!Object.getOwnPropertySymbols&&!a((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&q&&q<41})),L=U&&!Symbol.sham&&"symbol"==typeof Symbol.iterator;var H=Object;B=L?function(t){return"symbol"==typeof t}:function(t){var e=k("Symbol");return _(e)&&D(e.prototype,H(t))};var K,Z,X,Q=String;X=function(t){try{return Q(t)}catch(t){return"Object"}};var tt=TypeError;Z=function(t){if(_(t))return t;throw tt(X(t)+" is not a function")},K=function(t,e){var r=t[e];return C(r)?void 0:Z(r)};var et,rt=TypeError;et=function(t,e){var r,n;if("string"===e&&_(r=t.toString)&&!x(n=u(r,t)))return n;if(_(r=t.valueOf)&&!x(n=u(r,t)))return n;if("string"!==e&&_(r=t.toString)&&!x(n=u(r,t)))return n;throw rt("Can't convert object to primitive value")};var nt,ot;var it,at={},ct=Object.defineProperty;it=function(t,e){try{ct(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e};var ut=n["__core-js_shared__"]||it("__core-js_shared__",{});at=ut,(ot=function(t,e){return at[t]||(at[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.25.0",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.0/LICENSE",source:"https://github.com/zloirock/core-js"});var st,ft={},lt=Object;st=function(t){return lt(P(t))};var pt=g({}.hasOwnProperty);ft=Object.hasOwn||function(t,e){return pt(st(t),e)};var vt,dt=0,yt=Math.random(),ht=g(1..toString);vt=function(t){return"Symbol("+(void 0===t?"":t)+")_"+ht(++dt+yt,36)};var mt=ot("wks"),gt=n.Symbol,bt=gt&&gt.for,wt=L?gt:gt&&gt.withoutSetter||vt;nt=function(t){if(!ft(mt,t)||!U&&"string"!=typeof mt[t]){var e="Symbol."+t;U&&ft(gt,t)?mt[t]=gt[t]:mt[t]=L&&bt?bt(e):wt(e)}return mt[t]};var jt=TypeError,Et=nt("toPrimitive");M=function(t,e){if(!x(t)||B(t))return t;var r,n=K(t,Et);if(n){if(void 0===e&&(e="default"),r=u(n,t,e),!x(r)||B(r))return r;throw jt("Can't convert object to primitive value")}return void 0===e&&(e="number"),et(t,e)},R=function(t){var e=M(t,"string");return B(e)?e:e+""};var St,Tt,Ot=n.document,At=x(Ot)&&x(Ot.createElement);Tt=function(t){return At?Ot.createElement(t):{}},St=!i&&!a((function(){return 7!=Object.defineProperty(Tt("div"),"a",{get:function(){return 7}}).a}));var Pt,Ct,It=Object.getOwnPropertyDescriptor,Rt=e=i?It:function(t,e){if(t=y(t),e=R(e),St)try{return It(t,e)}catch(t){}if(ft(t,e))return d(!u(s,t,e),t[e])},Mt={};Ct=i&&a((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}));var _t,xt=String,Nt=TypeError;_t=function(t){if(x(t))return t;throw Nt(xt(t)+" is not an object")};var kt=TypeError,Bt=Object.defineProperty,Ft=Object.getOwnPropertyDescriptor;Pt=i?Ct?function(t,e,r){if(_t(t),e=R(e),_t(r),"function"==typeof t&&"prototype"===e&&"value"in r&&"writable"in r&&!r.writable){var n=Ft(t,e);n&&n.writable&&(t[e]=r.value,r={configurable:"configurable"in r?r.configurable:n.configurable,enumerable:"enumerable"in r?r.enumerable:n.enumerable,writable:!1})}return Bt(t,e,r)}:Bt:function(t,e,r){if(_t(t),e=R(e),_t(r),St)try{return Bt(t,e,r)}catch(t){}if("get"in r||"set"in r)throw kt("Accessors not supported");return"value"in r&&(t[e]=r.value),t},Mt=i?function(t,e,r){return Pt(t,e,d(1,r))}:function(t,e,r){return t[e]=r,t};var Dt,Lt,Ut=Function.prototype,qt=i&&Object.getOwnPropertyDescriptor,Gt=ft(Ut,"name"),Jt={EXISTS:Gt,PROPER:Gt&&"something"===function(){}.name,CONFIGURABLE:Gt&&(!i||i&&qt(Ut,"name").configurable)}.CONFIGURABLE,Wt={},zt=g(Function.toString);_(at.inspectSource)||(at.inspectSource=function(t){return zt(t)}),Wt=at.inspectSource;var Vt,Yt,$t=n.WeakMap;Yt=_($t)&&/native code/.test(String($t));var Ht,Kt=ot("keys");Ht=function(t){return Kt[t]||(Kt[t]=vt(t))};var Zt={};Zt={};var Xt,Qt,te,ee=n.TypeError,re=n.WeakMap;if(Yt||at.state){var ne=at.state||(at.state=new re),oe=g(ne.get),ie=g(ne.has),ae=g(ne.set);Xt=function(t,e){if(ie(ne,t))throw ee("Object already initialized");return e.facade=t,ae(ne,t,e),e},Qt=function(t){return oe(ne,t)||{}},te=function(t){return ie(ne,t)}}else{var ce=Ht("state");Zt[ce]=!0,Xt=function(t,e){if(ft(t,ce))throw ee("Object already initialized");return e.facade=t,Mt(t,ce,e),e},Qt=function(t){return ft(t,ce)?t[ce]:{}},te=function(t){return ft(t,ce)}}var ue=(Vt={set:Xt,get:Qt,has:te,enforce:function(t){return te(t)?Qt(t):Xt(t,{})},getterFor:function(t){return function(e){var r;if(!x(e)||(r=Qt(e)).type!==t)throw ee("Incompatible receiver, "+t+" required");return r}}}).enforce,se=Vt.get,fe=Object.defineProperty,le=i&&!a((function(){return 8!==fe((function(){}),"length",{value:8}).length})),pe=String(String).split("String"),ve=Lt=function(t,e,r){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!ft(t,"name")||Jt&&t.name!==e)&&(i?fe(t,"name",{value:e,configurable:!0}):t.name=e),le&&r&&ft(r,"arity")&&t.length!==r.arity&&fe(t,"length",{value:r.arity});try{r&&ft(r,"constructor")&&r.constructor?i&&fe(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=ue(t);return ft(n,"source")||(n.source=pe.join("string"==typeof e?e:"")),t};Function.prototype.toString=ve((function(){return _(this)&&se(this).source||Wt(this)}),"toString"),Dt=function(t,e,r,n){n||(n={});var o=n.enumerable,i=void 0!==n.name?n.name:e;if(_(r)&&Lt(r,i,n),n.global)o?t[e]=r:it(e,r);else{try{n.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=r:Pt(t,e,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return t};var de,ye,he,me,ge,be={},we={},je=Math.ceil,Ee=Math.floor;we=Math.trunc||function(t){var e=+t;return(e>0?Ee:je)(e)},ge=function(t){var e=+t;return e!=e||0===e?0:we(e)};var Se=Math.max,Te=Math.min;me=function(t,e){var r=ge(t);return r<0?Se(r+e,0):Te(r,e)};var Oe,Ae,Pe=Math.min;Ae=function(t){return t>0?Pe(ge(t),9007199254740991):0},Oe=function(t){return Ae(t.length)};var Ce=function(t){return function(e,r,n){var o,i=y(e),a=Oe(i),c=me(n,a);if(t&&r!=r){for(;a>c;)if((o=i[c++])!=o)return!0}else for(;a>c;c++)if((t||c in i)&&i[c]===r)return t||c||0;return!t&&-1}},Ie={includes:Ce(!0),indexOf:Ce(!1)}.indexOf,Re=g([].push);he=function(t,e){var r,n=y(t),o=0,i=[];for(r in n)!ft(Zt,r)&&ft(n,r)&&Re(i,r);for(;e.length>o;)ft(n,r=e[o++])&&(~Ie(i,r)||Re(i,r));return i};var Me,_e={},xe=(_e=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]).concat("length","prototype");ye=Object.getOwnPropertyNames||function(t){return he(t,xe)},Me=Object.getOwnPropertySymbols;var Ne=g([].concat);be=k("Reflect","ownKeys")||function(t){var e=ye(_t(t));return Me?Ne(e,Me(t)):e},de=function(t,r,n){for(var o=be(r),i=Pt,a=e,c=0;c<o.length;c++){var u=o[c];ft(t,u)||n&&ft(n,u)||i(t,u,a(r,u))}};var ke={},Be=/#|\.prototype\./,Fe=function(t,e){var r=Le[De(t)];return r==qe||r!=Ue&&(_(e)?a(e):!!e)},De=Fe.normalize=function(t){return String(t).replace(Be,".").toLowerCase()},Le=Fe.data={},Ue=Fe.NATIVE="N",qe=Fe.POLYFILL="P";ke=Fe,t=function(t,e){var r,o,i,a,c,u=t.target,s=t.global,f=t.stat;if(r=s?n:f?n[u]||it(u,{}):(n[u]||{}).prototype)for(o in e){if(a=e[o],i=t.dontCallGetSet?(c=Rt(r,o))&&c.value:r[o],!ke(s?o:u+(f?".":"#")+o,t.forced)&&void 0!==i){if(typeof a==typeof i)continue;de(a,i)}(t.sham||i&&i.sham)&&Mt(a,"sham",!0),Dt(r,o,a,t)}};var Ge,Je,We={},ze={};ze[nt("toStringTag")]="z",Je="[object z]"===String(ze);var Ve=nt("toStringTag"),Ye=Object,$e="Arguments"==h(function(){return arguments}());We=Je?h:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Ye(t),Ve))?r:$e?h(e):"Object"==(n=h(e))&&_(e.callee)?"Arguments":n};var He=String;Ge=function(t){if("Symbol"===We(t))throw TypeError("Cannot convert a Symbol value to a string");return He(t)};var Ke=Pt,Ze=n.Symbol,Xe=Ze&&Ze.prototype;if(i&&_(Ze)&&(!("description"in Xe)||void 0!==Ze().description)){var Qe={},tr=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:Ge(arguments[0]),e=D(Xe,this)?new Ze(t):void 0===t?Ze():Ze(t);return""===t&&(Qe[e]=!0),e};de(tr,Ze),tr.prototype=Xe,Xe.constructor=tr;var er="Symbol(test)"==String(Ze("test")),rr=g(Xe.valueOf),nr=g(Xe.toString),or=/^Symbol\((.*)\)[^)]+$/,ir=g("".replace),ar=g("".slice);Ke(Xe,"description",{configurable:!0,get:function(){var t=rr(this);if(ft(Qe,t))return"";var e=nr(t),r=er?ar(e,7,-1):ir(e,or,"$1");return""===r?void 0:r}}),t({global:!0,constructor:!0,forced:!0},{Symbol:tr})}var cr={},ur={};ur=Array.isArray||function(t){return"Array"==h(t)};var sr,fr=TypeError;sr=function(t){if(t>9007199254740991)throw fr("Maximum allowed index exceeded");return t};var lr,pr=g(g.bind);lr=function(t,e){return Z(t),void 0===e?t:c?pr(t,e):function(){return t.apply(e,arguments)}};var vr=function(t,e,r,n,o,i,a,c){for(var u,s,f=o,l=0,p=!!a&&lr(a,c);l<n;)l in r&&(u=p?p(r[l],l,e):r[l],i>0&&ur(u)?(s=Oe(u),f=vr(t,e,u,s,f,i-1)-1):(sr(f+1),t[f]=u),f++),l++;return f};cr=vr;var dr,yr,hr={},mr=function(){},gr=[],br=k("Reflect","construct"),wr=/^\s*(?:class|function)\b/,jr=g(wr.exec),Er=!wr.exec(mr),Sr=function(t){if(!_(t))return!1;try{return br(mr,gr,t),!0}catch(t){return!1}},Tr=function(t){if(!_(t))return!1;switch(We(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Er||!!jr(wr,Wt(t))}catch(t){return!0}};Tr.sham=!0,hr=!br||a((function(){var t;return Sr(Sr.call)||!Sr(Object)||!Sr((function(){t=!0}))||t}))?Tr:Sr;var Or=nt("species"),Ar=Array;yr=function(t){var e;return ur(t)&&(e=t.constructor,(hr(e)&&(e===Ar||ur(e.prototype))||x(e)&&null===(e=e[Or]))&&(e=void 0)),void 0===e?Ar:e},dr=function(t,e){return new(yr(t))(0===e?0:e)},t({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=st(this),r=Oe(e),n=dr(e,0);return n.length=cr(n,e,e,r,0,void 0===t?1:ge(t)),n}}),t({target:"Array",proto:!0},{flatMap:function(t){var e,r=st(this),n=Oe(r);return Z(t),(e=dr(r,0)).length=cr(e,r,r,n,0,1,t,arguments.length>1?arguments[1]:void 0),e}});var Pr,Cr=TypeError;Pr=function(t,e){if(!delete t[e])throw Cr("Cannot delete property "+X(e)+" of "+X(t))};var Ir,Rr,Mr={};Rr=function(t,e,r){var n=R(e);n in t?Pt(t,n,d(0,r)):t[n]=r};var _r=Array,xr=Math.max;Ir=function(t,e,r){for(var n=Oe(t),o=me(e,n),i=me(void 0===r?n:r,n),a=_r(xr(i-o,0)),c=0;o<i;o++,c++)Rr(a,c,t[o]);return a.length=c,a};var Nr=Math.floor,kr=function(t,e){var r=t.length,n=Nr(r/2);return r<8?Br(t,e):Fr(t,kr(Ir(t,0,n),e),kr(Ir(t,n),e),e)},Br=function(t,e){for(var r,n,o=t.length,i=1;i<o;){for(n=i,r=t[i];n&&e(t[n-1],r)>0;)t[n]=t[--n];n!==i++&&(t[n]=r)}return t},Fr=function(t,e,r,n){for(var o=e.length,i=r.length,a=0,c=0;a<o||c<i;)t[a+c]=a<o&&c<i?n(e[a],r[c])<=0?e[a++]:r[c++]:a<o?e[a++]:r[c++];return t};Mr=kr;var Dr;Dr=function(t,e){var r=[][t];return!!r&&a((function(){r.call(null,e||function(){return 1},1)}))};var Lr,Ur=G.match(/firefox\/(\d+)/i);Lr=!!Ur&&+Ur[1];var qr;qr=/MSIE|Trident/.test(G);var Gr,Jr=G.match(/AppleWebKit\/(\d+)\./);Gr=!!Jr&&+Jr[1];var Wr=[],zr=g(Wr.sort),Vr=g(Wr.push),Yr=a((function(){Wr.sort(void 0)})),$r=a((function(){Wr.sort(null)})),Hr=Dr("sort"),Kr=!a((function(){if(q)return q<70;if(!(Lr&&Lr>3)){if(qr)return!0;if(Gr)return Gr<603;var t,e,r,n,o="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)Wr.push({k:e+n,v:r})}for(Wr.sort((function(t,e){return e.v-t.v})),n=0;n<Wr.length;n++)e=Wr[n].k.charAt(0),o.charAt(o.length-1)!==e&&(o+=e);return"DGBEFHACIJK"!==o}}));t({target:"Array",proto:!0,forced:Yr||!$r||!Hr||!Kr},{sort:function(t){void 0!==t&&Z(t);var e=st(this);if(Kr)return void 0===t?zr(e):zr(e,t);var r,n,o=[],i=Oe(e);for(n=0;n<i;n++)n in e&&Vr(o,e[n]);for(Mr(o,function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:Ge(e)>Ge(r)?1:-1}}(t)),r=Oe(o),n=0;n<r;)e[n]=o[n++];for(;n<i;)Pr(e,n++);return e}});var Zr,Xr,Qr={},tn={};tn=Object.keys||function(t){return he(t,_e)},Xr=i&&!Ct?Object.defineProperties:function(t,e){_t(t);for(var r,n=y(e),o=tn(e),i=o.length,a=0;i>a;)Pt(t,r=o[a++],n[r]);return t};var en={};en=k("document","documentElement");var rn,nn=Ht("IE_PROTO"),on=function(){},an=function(t){return"<script>"+t+"<\/script>"},cn=function(t){t.write(an("")),t.close();var e=t.parentWindow.Object;return t=null,e},un=function(){try{rn=new ActiveXObject("htmlfile")}catch(t){}var t,e;un="undefined"!=typeof document?document.domain&&rn?cn(rn):((e=Tt("iframe")).style.display="none",en.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(an("document.F=Object")),t.close(),t.F):cn(rn);for(var r=_e.length;r--;)delete un.prototype[_e[r]];return un()};Zt[nn]=!0,Qr=Object.create||function(t,e){var r;return null!==t?(on.prototype=_t(t),r=new on,on.prototype=null,r[nn]=t):r=un(),void 0===e?r:Xr(r,e)};var sn=Pt,fn=nt("unscopables"),ln=Array.prototype;null==ln[fn]&&sn(ln,fn,{configurable:!0,value:Qr(null)}),(Zr=function(t){ln[fn][t]=!0})("flat"),Zr("flatMap");var pn=Math.hypot,vn=Math.abs,dn=Math.sqrt;t({target:"Math",stat:!0,arity:2,forced:!!pn&&pn(1/0,NaN)!==1/0},{hypot:function(t,e){for(var r,n,o=0,i=0,a=arguments.length,c=0;i<a;)c<(r=vn(arguments[i++]))?(o=o*(n=c/r)*n+1,c=r):o+=r>0?(n=r/c)*n:r;return c===1/0?1/0:c*dn(o)}});var yn,hn,mn;mn={};var gn=nt("iterator"),bn=Array.prototype;hn=function(t){return void 0!==t&&(mn.Array===t||bn[gn]===t)};var wn,jn,En=nt("iterator");jn=function(t){if(!C(t))return K(t,En)||K(t,"@@iterator")||mn[We(t)]};var Sn=TypeError;wn=function(t,e){var r=arguments.length<2?jn(t):e;if(Z(r))return _t(u(r,t));throw Sn(X(t)+" is not iterable")};var Tn;Tn=function(t,e,r){var n,o;_t(t);try{if(!(n=K(t,"return"))){if("throw"===e)throw r;return r}n=u(n,t)}catch(t){o=!0,n=t}if("throw"===e)throw r;if(o)throw n;return _t(n),r};var On=TypeError,An=function(t,e){this.stopped=t,this.result=e},Pn=An.prototype;yn=function(t,e,r){var n,o,i,a,c,s,f,l=r&&r.that,p=!(!r||!r.AS_ENTRIES),v=!(!r||!r.IS_RECORD),d=!(!r||!r.IS_ITERATOR),y=!(!r||!r.INTERRUPTED),h=lr(e,l),m=function(t){return n&&Tn(n,"normal",t),new An(!0,t)},g=function(t){return p?(_t(t),y?h(t[0],t[1],m):h(t[0],t[1])):y?h(t,m):h(t)};if(v)n=t.iterator;else if(d)n=t;else{if(!(o=jn(t)))throw On(X(t)+" is not iterable");if(hn(o)){for(i=0,a=Oe(t);a>i;i++)if((c=g(t[i]))&&D(Pn,c))return c;return new An(!1)}n=wn(t,o)}for(s=v?t.next:n.next;!(f=u(s,n)).done;){try{c=g(f.value)}catch(t){Tn(n,"throw",t)}if("object"==typeof c&&c&&D(Pn,c))return c}return new An(!1)},t({target:"Object",stat:!0},{fromEntries:function(t){var e={};return yn(t,(function(t,r){Rr(e,t,r)}),{AS_ENTRIES:!0}),e}});var Cn;Cn="process"==h(n.process);var In,Rn={},Mn=String,_n=TypeError;In=function(t){if("object"==typeof t||_(t))return t;throw _n("Can't set "+Mn(t)+" as a prototype")},Rn=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=g(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return _t(r),In(n),e?t(r,n):r.__proto__=n,r}}():void 0);var xn,Nn=Pt,kn=nt("toStringTag");xn=function(t,e,r){t&&!r&&(t=t.prototype),t&&!ft(t,kn)&&Nn(t,kn,{configurable:!0,value:e})};var Bn,Fn=nt("species");Bn=function(t){var e=k(t),r=Pt;i&&e&&!e[Fn]&&r(e,Fn,{configurable:!0,get:function(){return this}})};var Dn,Ln=TypeError;Dn=function(t,e){if(D(e,t))return t;throw Ln("Incorrect invocation")};var Un,qn,Gn=TypeError;qn=function(t){if(hr(t))return t;throw Gn(X(t)+" is not a constructor")};var Jn=nt("species");Un=function(t,e){var r,n=_t(t).constructor;return void 0===n||C(r=_t(n)[Jn])?e:qn(r)};var Wn,zn={},Vn=Function.prototype,Yn=Vn.apply,$n=Vn.call;zn="object"==typeof Reflect&&Reflect.apply||(c?$n.bind(Yn):function(){return $n.apply(Yn,arguments)});var Hn={};Hn=g([].slice);var Kn,Zn=TypeError;Kn=function(t,e){if(t<e)throw Zn("Not enough arguments");return t};var Xn;Xn=/(?:ipad|iphone|ipod).*applewebkit/i.test(G);var Qn,to,eo,ro,no=n.setImmediate,oo=n.clearImmediate,io=n.process,ao=n.Dispatch,co=n.Function,uo=n.MessageChannel,so=n.String,fo=0,lo={};try{Qn=n.location}catch(t){}var po=function(t){if(ft(lo,t)){var e=lo[t];delete lo[t],e()}},vo=function(t){return function(){po(t)}},yo=function(t){po(t.data)},ho=function(t){n.postMessage(so(t),Qn.protocol+"//"+Qn.host)};no&&oo||(no=function(t){Kn(arguments.length,1);var e=_(t)?t:co(t),r=Hn(arguments,1);return lo[++fo]=function(){zn(e,void 0,r)},to(fo),fo},oo=function(t){delete lo[t]},Cn?to=function(t){io.nextTick(vo(t))}:ao&&ao.now?to=function(t){ao.now(vo(t))}:uo&&!Xn?(ro=(eo=new uo).port2,eo.port1.onmessage=yo,to=lr(ro.postMessage,ro)):n.addEventListener&&_(n.postMessage)&&!n.importScripts&&Qn&&"file:"!==Qn.protocol&&!a(ho)?(to=ho,n.addEventListener("message",yo,!1)):to="onreadystatechange"in Tt("script")?function(t){en.appendChild(Tt("script")).onreadystatechange=function(){en.removeChild(this),po(t)}}:function(t){setTimeout(vo(t),0)});var mo,go=(Wn={set:no,clear:oo}).set,bo={},wo=e,jo=Wn.set;mo=/ipad|iphone|ipod/i.test(G)&&void 0!==n.Pebble;var Eo;Eo=/web0s(?!.*chrome)/i.test(G);var So,To,Oo,Ao,Po,Co,Io,Ro,Mo=n.MutationObserver||n.WebKitMutationObserver,_o=n.document,xo=n.process,No=n.Promise,ko=wo(n,"queueMicrotask"),Bo=ko&&ko.value;Bo||(So=function(){var t,e;for(Cn&&(t=xo.domain)&&t.exit();To;){e=To.fn,To=To.next;try{e()}catch(t){throw To?Ao():Oo=void 0,t}}Oo=void 0,t&&t.enter()},Xn||Cn||Eo||!Mo||!_o?!mo&&No&&No.resolve?((Io=No.resolve(void 0)).constructor=No,Ro=lr(Io.then,Io),Ao=function(){Ro(So)}):Cn?Ao=function(){xo.nextTick(So)}:(jo=lr(jo,n),Ao=function(){jo(So)}):(Po=!0,Co=_o.createTextNode(""),new Mo(So).observe(Co,{characterData:!0}),Ao=function(){Co.data=Po=!Po})),bo=Bo||function(t){var e={fn:t,next:void 0};Oo&&(Oo.next=e),To||(To=e,Ao()),Oo=e};var Fo;Fo=function(t,e){var r=n.console;r&&r.error&&(1==arguments.length?r.error(t):r.error(t,e))};var Do;Do=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}};var Lo={},Uo=function(){this.head=null,this.tail=null};Uo.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},Lo=Uo;var qo={};qo=n.Promise;var Go,Jo,Wo;Wo="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Jo=!Wo&&!Cn&&"object"==typeof window&&"object"==typeof document;qo&&qo.prototype;var zo,Vo=nt("species"),Yo=!1,$o=_(n.PromiseRejectionEvent);Go={CONSTRUCTOR:ke("Promise",(function(){var t=Wt(qo),e=t!==String(qo);if(!e&&66===q)return!0;if(!q||q<51||!/native code/.test(t)){var r=new qo((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};if((r.constructor={})[Vo]=n,!(Yo=r.then((function(){}))instanceof n))return!0}return!e&&(Jo||Wo)&&!$o})),REJECTION_EVENT:$o,SUBCLASSING:Yo};var Ho=TypeError,Ko=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw Ho("Bad Promise constructor");e=t,r=n})),this.resolve=Z(e),this.reject=Z(r)};zo=function(t){return new Ko(t)};var Zo,Xo,Qo,ti=Go.CONSTRUCTOR,ei=Go.REJECTION_EVENT,ri=Go.SUBCLASSING,ni=Vt.getterFor("Promise"),oi=Vt.set,ii=qo&&qo.prototype,ai=qo,ci=ii,ui=n.TypeError,si=n.document,fi=n.process,li=zo,pi=li,vi=!!(si&&si.createEvent&&n.dispatchEvent),di=function(t){var e;return!(!x(t)||!_(e=t.then))&&e},yi=function(t,e){var r,n,o,i=e.value,a=1==e.state,c=a?t.ok:t.fail,s=t.resolve,f=t.reject,l=t.domain;try{c?(a||(2===e.rejection&&wi(e),e.rejection=1),!0===c?r=i:(l&&l.enter(),r=c(i),l&&(l.exit(),o=!0)),r===t.promise?f(ui("Promise-chain cycle")):(n=di(r))?u(n,r,s,f):s(r)):f(i)}catch(t){l&&!o&&l.exit(),f(t)}},hi=function(t,e){t.notified||(t.notified=!0,bo((function(){for(var r,n=t.reactions;r=n.get();)yi(r,t);t.notified=!1,e&&!t.rejection&&gi(t)})))},mi=function(t,e,r){var o,i;vi?((o=si.createEvent("Event")).promise=e,o.reason=r,o.initEvent(t,!1,!0),n.dispatchEvent(o)):o={promise:e,reason:r},!ei&&(i=n["on"+t])?i(o):"unhandledrejection"===t&&Fo("Unhandled promise rejection",r)},gi=function(t){u(go,n,(function(){var e,r=t.facade,n=t.value;if(bi(t)&&(e=Do((function(){Cn?fi.emit("unhandledRejection",n,r):mi("unhandledrejection",r,n)})),t.rejection=Cn||bi(t)?2:1,e.error))throw e.value}))},bi=function(t){return 1!==t.rejection&&!t.parent},wi=function(t){u(go,n,(function(){var e=t.facade;Cn?fi.emit("rejectionHandled",e):mi("rejectionhandled",e,t.value)}))},ji=function(t,e,r){return function(n){t(e,n,r)}},Ei=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,hi(t,!0))},Si=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw ui("Promise can't be resolved itself");var n=di(e);n?bo((function(){var r={done:!1};try{u(n,e,ji(Si,r,t),ji(Ei,r,t))}catch(e){Ei(r,e,t)}})):(t.value=e,t.state=1,hi(t,!1))}catch(e){Ei({done:!1},e,t)}}};if(ti&&(ci=(ai=function(t){Dn(this,ci),Z(t),u(Zo,this);var e=ni(this);try{t(ji(Si,e),ji(Ei,e))}catch(t){Ei(e,t)}}).prototype,(Zo=function(t){oi(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new Lo,rejection:!1,state:0,value:void 0})}).prototype=Dt(ci,"then",(function(t,e){var r=ni(this),n=li(Un(this,ai));return r.parent=!0,n.ok=!_(t)||t,n.fail=_(e)&&e,n.domain=Cn?fi.domain:void 0,0==r.state?r.reactions.add(n):bo((function(){yi(n,r)})),n.promise})),Xo=function(){var t=new Zo,e=ni(t);this.promise=t,this.resolve=ji(Si,e),this.reject=ji(Ei,e)},zo=li=function(t){return t===ai||undefined===t?new Xo(t):pi(t)},_(qo)&&ii!==Object.prototype)){Qo=ii.then,ri||Dt(ii,"then",(function(t,e){var r=this;return new ai((function(t,e){u(Qo,r,t,e)})).then(t,e)}),{unsafe:!0});try{delete ii.constructor}catch(t){}Rn&&Rn(ii,ci)}t({global:!0,constructor:!0,wrap:!0,forced:ti},{Promise:ai}),xn(ai,"Promise",!1),Bn("Promise");var Ti,Oi=nt("iterator"),Ai=!1;try{var Pi=0,Ci={next:function(){return{done:!!Pi++}},return:function(){Ai=!0}};Ci[Oi]=function(){return this},Array.from(Ci,(function(){throw 2}))}catch(t){}t({target:"Promise",stat:!0,forced:Ti=Go.CONSTRUCTOR||!function(t,e){if(!e&&!Ai)return!1;var r=!1;try{var n={};n[Oi]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r}((function(t){qo.all(t).then(void 0,(function(){}))}))},{all:function(t){var e=this,r=zo(e),n=r.resolve,o=r.reject,i=Do((function(){var r=Z(e.resolve),i=[],a=0,c=1;yn(t,(function(t){var s=a++,f=!1;c++,u(r,e,t).then((function(t){f||(f=!0,i[s]=t,--c||n(i))}),o)})),--c||n(i)}));return i.error&&o(i.value),r.promise}});var Ii=Go.CONSTRUCTOR,Ri=qo&&qo.prototype;if(t({target:"Promise",proto:!0,forced:Ii,real:!0},{catch:function(t){return this.then(void 0,t)}}),_(qo)){var Mi=k("Promise").prototype.catch;Ri.catch!==Mi&&Dt(Ri,"catch",Mi,{unsafe:!0})}t({target:"Promise",stat:!0,forced:Ti},{race:function(t){var e=this,r=zo(e),n=r.reject,o=Do((function(){var o=Z(e.resolve);yn(t,(function(t){u(o,e,t).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}}),t({target:"Promise",stat:!0,forced:Go.CONSTRUCTOR},{reject:function(t){var e=zo(this);return u(e.reject,void 0,t),e.promise}});var _i,xi=Go.CONSTRUCTOR;_i=function(t,e){if(_t(t),x(e)&&e.constructor===t)return e;var r=zo(t);return(0,r.resolve)(e),r.promise};k("Promise");t({target:"Promise",stat:!0,forced:xi},{resolve:function(t){return _i(this,t)}});var Ni=qo&&qo.prototype;if(t({target:"Promise",proto:!0,real:!0,forced:!!qo&&a((function(){Ni.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=Un(this,k("Promise")),r=_(t);return this.then(r?function(r){return _i(e,t()).then((function(){return r}))}:t,r?function(r){return _i(e,t()).then((function(){throw r}))}:t)}}),_(qo)){var ki=k("Promise").prototype.finally;Ni.finally!==ki&&Dt(Ni,"finally",ki,{unsafe:!0})}var Bi,Fi;Fi="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView;var Di,Li=Pt,Ui={};Di=!a((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}));var qi=Ht("IE_PROTO"),Gi=Object,Ji=Gi.prototype;Ui=Di?Gi.getPrototypeOf:function(t){var e=st(t);if(ft(e,qi))return e[qi];var r=e.constructor;return _(r)&&e instanceof r?r.prototype:e instanceof Gi?Ji:null};var Wi,zi,Vi,Yi=Vt.enforce,$i=Vt.get,Hi=n.Int8Array,Ki=Hi&&Hi.prototype,Zi=n.Uint8ClampedArray,Xi=Zi&&Zi.prototype,Qi=Hi&&Ui(Hi),ta=Ki&&Ui(Ki),ea=Object.prototype,ra=n.TypeError,na=nt("toStringTag"),oa=vt("TYPED_ARRAY_TAG"),ia=Fi&&!!Rn&&"Opera"!==We(n.opera),aa=!1,ca={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},ua={BigInt64Array:8,BigUint64Array:8},sa=function(t){var e=Ui(t);if(x(e)){var r=$i(e);return r&&ft(r,"TypedArrayConstructor")?r.TypedArrayConstructor:sa(e)}},fa=function(t){if(!x(t))return!1;var e=We(t);return ft(ca,e)||ft(ua,e)};for(Wi in ca)(Vi=(zi=n[Wi])&&zi.prototype)?Yi(Vi).TypedArrayConstructor=zi:ia=!1;for(Wi in ua)(Vi=(zi=n[Wi])&&zi.prototype)&&(Yi(Vi).TypedArrayConstructor=zi);if((!ia||!_(Qi)||Qi===Function.prototype)&&(Qi=function(){throw ra("Incorrect invocation")},ia))for(Wi in ca)n[Wi]&&Rn(n[Wi],Qi);if((!ia||!ta||ta===ea)&&(ta=Qi.prototype,ia))for(Wi in ca)n[Wi]&&Rn(n[Wi].prototype,ta);if(ia&&Ui(Xi)!==ta&&Rn(Xi,ta),i&&!ft(ta,na))for(Wi in aa=!0,Li(ta,na,{get:function(){return x(this)?this[oa]:void 0}}),ca)n[Wi]&&Mt(n[Wi],oa,Wi);Bi={NATIVE_ARRAY_BUFFER_VIEWS:ia,TYPED_ARRAY_TAG:aa&&oa,aTypedArray:function(t){if(fa(t))return t;throw ra("Target is not a typed array")},aTypedArrayConstructor:function(t){if(_(t)&&(!Rn||D(Qi,t)))return t;throw ra(X(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,r,o){if(i){if(r)for(var a in ca){var c=n[a];if(c&&ft(c.prototype,t))try{delete c.prototype[t]}catch(r){try{c.prototype[t]=e}catch(t){}}}ta[t]&&!r||Dt(ta,t,r?e:ia&&Ki[t]||e,o)}},exportTypedArrayStaticMethod:function(t,e,r){var o,a;if(i){if(Rn){if(r)for(o in ca)if((a=n[o])&&ft(a,t))try{delete a[t]}catch(t){}if(Qi[t]&&!r)return;try{return Dt(Qi,t,r?e:ia&&Qi[t]||e)}catch(t){}}for(o in ca)!(a=n[o])||a[t]&&!r||Dt(a,t,e)}},getTypedArrayConstructor:sa,isView:function(t){if(!x(t))return!1;var e=We(t);return"DataView"===e||ft(ca,e)||ft(ua,e)},isTypedArray:fa,TypedArray:Qi,TypedArrayPrototype:ta};var la,pa,va=RangeError;pa=function(t){var e=ge(t);if(e<0)throw va("The argument can't be less than 0");return e};var da=RangeError;la=function(t,e){var r=pa(t);if(r%e)throw da("Wrong offset");return r};var ya=n.RangeError,ha=n.Int8Array,ma=ha&&ha.prototype,ga=ma&&ma.set,ba=Bi.aTypedArray,wa=Bi.exportTypedArrayMethod,ja=!a((function(){var t=new Uint8ClampedArray(2);return u(ga,t,{length:1,0:3},1),3!==t[1]})),Ea=ja&&Bi.NATIVE_ARRAY_BUFFER_VIEWS&&a((function(){var t=new ha(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));wa("set",(function(t){ba(this);var e=la(arguments.length>1?arguments[1]:void 0,1),r=st(t);if(ja)return u(ga,this,r,e);var n=this.length,o=Oe(r),i=0;if(o+e>n)throw ya("Wrong length");for(;i<o;)this[e+i]=r[i++]}),!ja||Ea);var Sa=Bi.aTypedArray,Ta=Bi.exportTypedArrayMethod,Oa=n.Uint16Array,Aa=Oa&&g(Oa.prototype.sort),Pa=!(!Aa||a((function(){Aa(new Oa(2),null)}))&&a((function(){Aa(new Oa(2),{})}))),Ca=!!Aa&&!a((function(){if(q)return q<74;if(Lr)return Lr<67;if(qr)return!0;if(Gr)return Gr<602;var t,e,r=new Oa(516),n=Array(516);for(t=0;t<516;t++)e=t%4,r[t]=515-t,n[t]=t-2*e+3;for(Aa(r,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(r[t]!==n[t])return!0}));Ta("sort",(function(t){return void 0!==t&&Z(t),Ca?Aa(this,t):Mr(Sa(this),function(t){return function(e,r){return void 0!==t?+t(e,r)||0:r!=r?-1:e!=e?1:0===e&&0===r?1/e>0&&1/r<0?1:-1:e>r}}(t))}),!Ca||Pa);var Ia=n.process;t({global:!0,enumerable:!0,dontCallGetSet:!0},{queueMicrotask:function(t){Kn(arguments.length,1),Z(t);var e=Cn&&Ia.domain;bo(e?e.bind(t):t)}});const Ra=()=>{const t=document.querySelector(".alert");t&&t.parentElement.removeChild(t)},Ma=(t,e)=>{Ra();const r=`<div class="alert alert--${t}">${e}</div>`;document.querySelector("body").insertAdjacentHTML("afterbegin",r),window.setTimeout(Ra,5e3)},_a=async(t,e)=>{const r=await fetch("/api/v1/users/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:t,password:e})}),n=await r.json();"success"===n.status?(Ma("success","You are now logged in"),setTimeout((()=>{location.assign("/")}),1e3)):Ma("error",n.message)},xa=async(t,e,r,n)=>{const o=await fetch("/api/v1/users/signup",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:t,email:e,password:r,passwordConfirm:n})}),i=await o.json();"success"===i.status?(Ma("success","You now have an account"),setTimeout((()=>{location.assign("/")}),1e3)):Ma("error",i.message)},Na=t=>{mapboxgl.accessToken="pk.eyJ1IjoiamRlZWphdCIsImEiOiJjbDdkN3J5bncwazhvM3ZvbDJ3Mjl3dGh2In0.MqeSMRvJZuR5gu7Ndwww-A";const e=new mapboxgl.Map({container:"map",style:"mapbox://styles/jdeejat/cj20he7w700402rmjs5zfkwlj",cooperativeGestures:!0});e.on("style.load",(()=>{e.setFog({})})),e.addControl(new mapboxgl.FullscreenControl);const r=new mapboxgl.LngLatBounds;t.forEach((t=>{const n=document.createElement("div");n.className="marker",new mapboxgl.Marker({element:n,anchor:"bottom"}).setLngLat(t.coordinates).setPopup(new mapboxgl.Popup({offset:25}).setHTML(`<a href='${t.googleMapsLink}' target="_blank">${t.pointName}</a>`)).addTo(e),r.extend(t.coordinates)})),e.fitBounds(r,{padding:{top:200,bottom:150,left:100,right:100}})},ka=async(t,e)=>{const r=await fetch("/api/v1/users/updateMe",{method:"PATCH",body:t}),n=await r.json();"success"===n.status?Ma("success","Data updated"):Ma("error",n.message)},Ba=async(t,e,r)=>{const n=await fetch("/api/v1/users/updatePassword",{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({currentPassword:t,newPassword:e,newPasswordConfirm:r})}),o=await n.json();"success"===o.status?Ma("success","Password updated"):Ma("error",o.message)},Fa=async(t=0,e=12)=>{const r=await fetch(`/?limit=${e}&page=${t}`,{method:"GET"});return await r.text()},Da=document.getElementById("map"),La=document.querySelector(".form--login"),Ua=document.querySelector(".form--signup"),qa=document.querySelector(".nav__el--logout"),Ga=document.querySelector(".form-user-data"),Ja=document.querySelector(".form-user-password"),Wa=document.getElementById("load-more");if(Da){Na(JSON.parse(Da.dataset.locations))}La&&La.addEventListener("submit",(t=>{t.preventDefault();const e=document.getElementById("email").value,r=document.getElementById("password").value;_a(e,r)})),Ua&&Ua.addEventListener("submit",(t=>{t.preventDefault();const e=document.getElementById("name").value,r=document.getElementById("email").value,n=document.getElementById("password").value,o=document.getElementById("passwordConfirm").value;xa(e,r,n,o)})),qa&&qa.addEventListener("click",(async()=>{const t=await fetch("/api/v1/users/logout",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});"success"===(await t.json()).status?(Ma("success","You are now logged out"),setTimeout((()=>{location.reload(!0)}),2e3)):Ma("error","Something went wrong. Try again!")})),Ga&&Ga.addEventListener("submit",(t=>{t.preventDefault();const e=new FormData;e.append("name",document.getElementById("name").value),e.append("email",document.getElementById("email").value),e.append("photo",document.getElementById("photo").files[0]),ka(e)})),Ja&&Ja.addEventListener("submit",(async t=>{t.preventDefault(),document.querySelector(".btn--save-password").textContent="Updating...";const e=document.getElementById("password-current").value,r=document.getElementById("password").value,n=document.getElementById("password-confirm").value;await Ba(e,r,n),document.querySelector(".btn--save-password").textContent="Save password",document.getElementById("password-current").value="",document.getElementById("password").value="",document.getElementById("password-confirm").value=""})),Wa&&Wa.addEventListener("click",(async()=>{const t=1*Wa.dataset.page+1,e=await Fa(t);document.querySelector(".card-container").insertAdjacentHTML("beforeend",e),Wa.dataset.page=t}));
>>>>>>> e0d122c (update)
//# sourceMappingURL=index.js.map
