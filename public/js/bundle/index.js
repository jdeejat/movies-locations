var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n=function(e){return e&&e.Math==Math&&e};t=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")();var r,o;r=!(o=function(e){try{return!!e()}catch(e){return!0}})((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}));var a,i,c,u={},s="object"==typeof document&&document.all,l=(c={all:s,IS_HTMLDDA:void 0===s&&void 0!==s}).all;u=c.IS_HTMLDDA?function(e){return"function"==typeof e||e===l}:function(e){return"function"==typeof e};var d,p={},f={};d=!o((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}));var m=Function.prototype,y=m.call,g=d&&m.bind.bind(y,y);f=d?g:function(e){return function(){return y.apply(e,arguments)}};var v,b,w;w=function(e){return null==e};var h=TypeError;b=function(e){if(w(e))throw h("Can't call method on "+e);return e};var S=Object;v=function(e){return S(b(e))};var j=f({}.hasOwnProperty);p=Object.hasOwn||function(e,t){return j(v(e),t)};var E,O=Function.prototype,T=r&&Object.getOwnPropertyDescriptor,I=p(O,"name"),P={EXISTS:I,PROPER:I&&"something"===function(){}.name,CONFIGURABLE:I&&(!r||r&&T(O,"name").configurable)}.CONFIGURABLE,C={},B={},k=Object.defineProperty;E=function(e,n){try{k(t,e,{value:n,configurable:!0,writable:!0})}catch(r){t[e]=n}return n};var L="__core-js_shared__",D=t[L]||E(L,{});B=D;var M=f(Function.toString);u(B.inspectSource)||(B.inspectSource=function(e){return M(e)}),C=B.inspectSource;var A,q,x=t.WeakMap;q=u(x)&&/native code/.test(String(x));var F={},_=c.all;F=c.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:u(e)||e===_}:function(e){return"object"==typeof e?null!==e:u(e)};var N,J,H,R={},$=t.document,z=F($)&&F($.createElement);H=function(e){return z?$.createElement(e):{}},J=!r&&!o((function(){return 7!=Object.defineProperty(H("div"),"a",{get:function(){return 7}}).a}));var G;G=r&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}));var U,W=String,Y=TypeError;U=function(e){if(F(e))return e;throw Y(W(e)+" is not an object")};var Z,X,K={},Q=Function.prototype.call;K=d?Q.bind(Q):function(){return Q.apply(Q,arguments)};var V,ee={},te=function(e){return u(e)?e:void 0};V=function(e,n){return arguments.length<2?te(t[e]):t[e]&&t[e][n]};var ne={};ne=f({}.isPrototypeOf);var re,oe,ae,ie={};ie=V("navigator","userAgent")||"";var ce,ue,se=t.process,le=t.Deno,de=se&&se.versions||le&&le.version,pe=de&&de.v8;pe&&(ue=(ce=pe.split("."))[0]>0&&ce[0]<4?1:+(ce[0]+ce[1])),!ue&&ie&&(!(ce=ie.match(/Edge\/(\d+)/))||ce[1]>=74)&&(ce=ie.match(/Chrome\/(\d+)/))&&(ue=+ce[1]),ae=ue,oe=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&ae&&ae<41})),re=oe&&!Symbol.sham&&"symbol"==typeof Symbol.iterator;var fe=Object;ee=re?function(e){return"symbol"==typeof e}:function(e){var t=V("Symbol");return u(t)&&ne(t.prototype,fe(e))};var me,ye,ge,ve=String;ge=function(e){try{return ve(e)}catch(e){return"Object"}};var be=TypeError;ye=function(e){if(u(e))return e;throw be(ge(e)+" is not a function")},me=function(e,t){var n=e[t];return w(n)?void 0:ye(n)};var we,he=TypeError;we=function(e,t){var n,r;if("string"===t&&u(n=e.toString)&&!F(r=K(n,e)))return r;if(u(n=e.valueOf)&&!F(r=K(n,e)))return r;if("string"!==t&&u(n=e.toString)&&!F(r=K(n,e)))return r;throw he("Can't convert object to primitive value")};var Se;(Se=function(e,t){return B[e]||(B[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.26.1",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.1/LICENSE",source:"https://github.com/zloirock/core-js"});var je,Ee=0,Oe=Math.random(),Te=f(1..toString);je=function(e){return"Symbol("+(void 0===e?"":e)+")_"+Te(++Ee+Oe,36)};var Ie=Se("wks"),Pe=t.Symbol,Ce=Pe&&Pe.for,Be=re?Pe:Pe&&Pe.withoutSetter||je,ke=TypeError,Le=function(e){if(!p(Ie,e)||!oe&&"string"!=typeof Ie[e]){var t="Symbol."+e;oe&&p(Pe,e)?Ie[e]=Pe[e]:Ie[e]=re&&Ce?Ce(t):Be(t)}return Ie[e]}("toPrimitive");X=function(e,t){if(!F(e)||ee(e))return e;var n,r=me(e,Le);if(r){if(void 0===t&&(t="default"),n=K(r,e,t),!F(n)||ee(n))return n;throw ke("Can't convert object to primitive value")}return void 0===t&&(t="number"),we(e,t)},Z=function(e){var t=X(e,"string");return ee(t)?t:t+""};var De=TypeError,Me=Object.defineProperty,Ae=Object.getOwnPropertyDescriptor,qe="enumerable",xe="configurable",Fe="writable";N=r?G?function(e,t,n){if(U(e),t=Z(t),U(n),"function"==typeof e&&"prototype"===t&&"value"in n&&Fe in n&&!n[Fe]){var r=Ae(e,t);r&&r[Fe]&&(e[t]=n.value,n={configurable:xe in n?n[xe]:r[xe],enumerable:qe in n?n[qe]:r[qe],writable:!1})}return Me(e,t,n)}:Me:function(e,t,n){if(U(e),t=Z(t),U(n),J)try{return Me(e,t,n)}catch(e){}if("get"in n||"set"in n)throw De("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var _e;_e=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},R=r?function(e,t,n){return N(e,t,_e(1,n))}:function(e,t,n){return e[t]=n,e};var Ne,Je=Se("keys");Ne=function(e){return Je[e]||(Je[e]=je(e))};var He={};He={};var Re,$e,ze,Ge="Object already initialized",Ue=t.TypeError,We=t.WeakMap;if(q||B.state){var Ye=B.state||(B.state=new We);Ye.get=Ye.get,Ye.has=Ye.has,Ye.set=Ye.set,Re=function(e,t){if(Ye.has(e))throw Ue(Ge);return t.facade=e,Ye.set(e,t),t},$e=function(e){return Ye.get(e)||{}},ze=function(e){return Ye.has(e)}}else{var Ze=Ne("state");He[Ze]=!0,Re=function(e,t){if(p(e,Ze))throw Ue(Ge);return t.facade=e,R(e,Ze,t),t},$e=function(e){return p(e,Ze)?e[Ze]:{}},ze=function(e){return p(e,Ze)}}var Xe=(A={set:Re,get:$e,has:ze,enforce:function(e){return ze(e)?$e(e):Re(e,{})},getterFor:function(e){return function(t){var n;if(!F(t)||(n=$e(t)).type!==e)throw Ue("Incompatible receiver, "+e+" required");return n}}}).enforce,Ke=A.get,Qe=Object.defineProperty,Ve=r&&!o((function(){return 8!==Qe((function(){}),"length",{value:8}).length})),et=String(String).split("String"),tt=i=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!p(e,"name")||P&&e.name!==t)&&(r?Qe(e,"name",{value:t,configurable:!0}):e.name=t),Ve&&n&&p(n,"arity")&&e.length!==n.arity&&Qe(e,"length",{value:n.arity});try{n&&p(n,"constructor")&&n.constructor?r&&Qe(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var o=Xe(e);return p(o,"source")||(o.source=et.join("string"==typeof t?t:"")),e};Function.prototype.toString=tt((function(){return u(this)&&Ke(this).source||C(this)}),"toString"),a=function(e,t,n){return n.get&&i(n.get,t,{getter:!0}),n.set&&i(n.set,t,{setter:!0}),N(e,t,n)};var nt;nt=function(){var e=U(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t};var rt=t.RegExp,ot=rt.prototype;r&&o((function(){var e=!0;try{rt(".","d")}catch(t){e=!1}var t={},n="",r=e?"dgimsy":"gimsy",o=function(e,r){Object.defineProperty(t,e,{get:function(){return n+=r,!0}})},a={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var i in e&&(a.hasIndices="d"),a)o(i,a[i]);return Object.getOwnPropertyDescriptor(ot,"flags").get.call(t)!==r||n!==r}))&&a(ot,"flags",{configurable:!0,get:nt});const at=()=>{const e=document.querySelector(".alert");e&&e.parentElement.removeChild(e)},it=(e,t)=>{at();const n=`<div class="alert alert--${e}">${t}</div>`;document.querySelector("body").insertAdjacentHTML("afterbegin",n),window.setTimeout(at,5e3)},ct=async(e,t)=>{const n=await fetch("/api/v1/users/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),r=await n.json();"success"===r.status?(it("success","You are now logged in"),setTimeout((()=>{location.assign("/")}),1e3)):it("error",r.message)},ut=async(e,t,n,r)=>{const o=await fetch("/api/v1/users/signup",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,password:n,passwordConfirm:r})}),a=await o.json();"success"===a.status?(it("success","You now have an account"),setTimeout((()=>{location.assign("/")}),1e3)):it("error",a.message)},st=e=>{mapboxgl.accessToken="pk.eyJ1IjoiamRlZWphdCIsImEiOiJjbDdkN3J5bncwazhvM3ZvbDJ3Mjl3dGh2In0.MqeSMRvJZuR5gu7Ndwww-A";const t=new mapboxgl.Map({container:"map",style:"mapbox://styles/jdeejat/cj20he7w700402rmjs5zfkwlj",cooperativeGestures:!0});t.on("style.load",(()=>{t.setFog({})})),t.addControl(new mapboxgl.FullscreenControl);const n=new mapboxgl.LngLatBounds;e.forEach((e=>{const r=document.createElement("div");r.className="marker",new mapboxgl.Marker({element:r,anchor:"bottom"}).setLngLat(e.coordinates).setPopup(new mapboxgl.Popup({offset:25}).setHTML(`<a href='${e.googleMapsLink}' target="_blank">${e.pointName}</a>`)).addTo(t),n.extend(e.coordinates)})),t.fitBounds(n,{padding:{top:200,bottom:150,left:100,right:100}})},lt=async(e,t)=>{const n=await fetch("/api/v1/users/updateMe",{method:"PATCH",body:e}),r=await n.json();"success"===r.status?it("success","Data updated"):it("error",r.message)},dt=async(e,t,n)=>{const r=await fetch("/api/v1/users/updatePassword",{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({currentPassword:e,newPassword:t,newPasswordConfirm:n})}),o=await r.json();"success"===o.status?it("success","Password updated"):it("error",o.message)},pt=async(e=0,t=12)=>{const n=await fetch(`/?limit=${t}&page=${e}`,{method:"GET"});return await n.text()},ft=document.getElementById("map"),mt=document.querySelector(".form--login"),yt=document.querySelector(".form--signup"),gt=document.querySelector(".nav__el--logout"),vt=document.querySelector(".form-user-data"),bt=document.querySelector(".form-user-password"),wt=document.getElementById("load-more");if(ft){st(JSON.parse(ft.dataset.locations))}mt&&mt.addEventListener("submit",(e=>{e.preventDefault();const t=document.getElementById("email").value,n=document.getElementById("password").value;ct(t,n)})),yt&&yt.addEventListener("submit",(e=>{e.preventDefault();const t=document.getElementById("name").value,n=document.getElementById("email").value,r=document.getElementById("password").value,o=document.getElementById("passwordConfirm").value;ut(t,n,r,o)})),gt&&gt.addEventListener("click",(async()=>{const e=await fetch("/api/v1/users/logout",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});"success"===(await e.json()).status?(it("success","You are now logged out"),setTimeout((()=>{location.reload(!0)}),2e3)):it("error","Something went wrong. Try again!")})),vt&&vt.addEventListener("submit",(e=>{e.preventDefault();const t=new FormData;t.append("name",document.getElementById("name").value),t.append("email",document.getElementById("email").value),t.append("photo",document.getElementById("photo").files[0]),lt(t)})),bt&&bt.addEventListener("submit",(async e=>{e.preventDefault(),document.querySelector(".btn--save-password").textContent="Updating...";const t=document.getElementById("password-current").value,n=document.getElementById("password").value,r=document.getElementById("password-confirm").value;await dt(t,n,r),document.querySelector(".btn--save-password").textContent="Save password",document.getElementById("password-current").value="",document.getElementById("password").value="",document.getElementById("password-confirm").value=""})),wt&&wt.addEventListener("click",(async()=>{const e=1*wt.dataset.page+1,t=await pt(e);document.querySelector(".card-container").insertAdjacentHTML("beforeend",t),wt.dataset.page=e}));
//# sourceMappingURL=index.js.map
