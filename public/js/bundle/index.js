var t=require("node-fetch"),e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function r(t){return t&&t.__esModule?t.default:t}var n,o,i={},a=function(t){return t&&t.Math==Math&&t};i=a("object"==typeof globalThis&&globalThis)||a("object"==typeof window&&window)||a("object"==typeof self&&self)||a("object"==typeof e&&e)||function(){return this}()||Function("return this")();var c,u;c=!(u=function(t){try{return!!t()}catch(t){return!0}})((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}));var s,f={};s=!u((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}));var l,p=Function.prototype.call;f=s?p.bind(p):function(){return p.apply(p,arguments)};var v={}.propertyIsEnumerable,d=Object.getOwnPropertyDescriptor,y=d&&!v.call({1:2},1);l=y?function(t){var e=d(this,t);return!!e&&e.enumerable}:v;var h;h=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}};var m,g,b,w={},S={},j=Function.prototype,T=j.call,E=s&&j.bind.bind(T,T),O=(S=s?E:function(t){return function(){return T.apply(t,arguments)}})({}.toString),A=S("".slice);b=function(t){return A(O(t),8,-1)},g=function(t){if("Function"===b(t))return S(t)};var P=Object,C=g("".split);w=u((function(){return!P("z").propertyIsEnumerable(0)}))?function(t){return"String"==b(t)?C(t,""):P(t)}:P;var I,R;R=function(t){return null==t};var _=TypeError;I=function(t){if(R(t))throw _("Can't call method on "+t);return t},m=function(t){return w(I(t))};var M,x,N,D={},k={},B="object"==typeof document&&document.all,F=(N={all:B,IS_HTMLDDA:void 0===B&&void 0!==B}).all;k=N.IS_HTMLDDA?function(t){return"function"==typeof t||t===F}:function(t){return"function"==typeof t};var L=N.all;D=N.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:k(t)||t===L}:function(t){return"object"==typeof t?null!==t:k(t)};var U,q={},G=function(t){return k(t)?t:void 0};U=function(t,e){return arguments.length<2?G(i[t]):i[t]&&i[t][e]};var J={};J=g({}.isPrototypeOf);var W,z,H,V={};V=U("navigator","userAgent")||"";var Y,$,K=i.process,Z=i.Deno,X=K&&K.versions||Z&&Z.version,Q=X&&X.v8;Q&&($=(Y=Q.split("."))[0]>0&&Y[0]<4?1:+(Y[0]+Y[1])),!$&&V&&(!(Y=V.match(/Edge\/(\d+)/))||Y[1]>=74)&&(Y=V.match(/Chrome\/(\d+)/))&&($=+Y[1]),H=$,z=!!Object.getOwnPropertySymbols&&!u((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&H&&H<41})),W=z&&!Symbol.sham&&"symbol"==typeof Symbol.iterator;var tt=Object;q=W?function(t){return"symbol"==typeof t}:function(t){var e=U("Symbol");return k(e)&&J(e.prototype,tt(t))};var et,rt,nt,ot=String;nt=function(t){try{return ot(t)}catch(t){return"Object"}};var it=TypeError;rt=function(t){if(k(t))return t;throw it(nt(t)+" is not a function")},et=function(t,e){var r=t[e];return R(r)?void 0:rt(r)};var at,ct=TypeError;at=function(t,e){var r,n;if("string"===e&&k(r=t.toString)&&!D(n=f(r,t)))return n;if(k(r=t.valueOf)&&!D(n=f(r,t)))return n;if("string"!==e&&k(r=t.toString)&&!D(n=f(r,t)))return n;throw ct("Can't convert object to primitive value")};var ut,st;var ft,lt={},pt=Object.defineProperty;ft=function(t,e){try{pt(i,t,{value:e,configurable:!0,writable:!0})}catch(r){i[t]=e}return e};var vt=i["__core-js_shared__"]||ft("__core-js_shared__",{});lt=vt,(st=function(t,e){return lt[t]||(lt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.26.0",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.0/LICENSE",source:"https://github.com/zloirock/core-js"});var dt,yt={},ht=Object;dt=function(t){return ht(I(t))};var mt=g({}.hasOwnProperty);yt=Object.hasOwn||function(t,e){return mt(dt(t),e)};var gt,bt=0,wt=Math.random(),St=g(1..toString);gt=function(t){return"Symbol("+(void 0===t?"":t)+")_"+St(++bt+wt,36)};var jt=st("wks"),Tt=i.Symbol,Et=Tt&&Tt.for,Ot=W?Tt:Tt&&Tt.withoutSetter||gt;ut=function(t){if(!yt(jt,t)||!z&&"string"!=typeof jt[t]){var e="Symbol."+t;z&&yt(Tt,t)?jt[t]=Tt[t]:jt[t]=W&&Et?Et(e):Ot(e)}return jt[t]};var At=TypeError,Pt=ut("toPrimitive");x=function(t,e){if(!D(t)||q(t))return t;var r,n=et(t,Pt);if(n){if(void 0===e&&(e="default"),r=f(n,t,e),!D(r)||q(r))return r;throw At("Can't convert object to primitive value")}return void 0===e&&(e="number"),at(t,e)},M=function(t){var e=x(t,"string");return q(e)?e:e+""};var Ct,It,Rt=i.document,_t=D(Rt)&&D(Rt.createElement);It=function(t){return _t?Rt.createElement(t):{}},Ct=!c&&!u((function(){return 7!=Object.defineProperty(It("div"),"a",{get:function(){return 7}}).a}));var Mt,xt,Nt=Object.getOwnPropertyDescriptor,Dt=o=c?Nt:function(t,e){if(t=m(t),e=M(e),Ct)try{return Nt(t,e)}catch(t){}if(yt(t,e))return h(!f(l,t,e),t[e])},kt={};xt=c&&u((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}));var Bt,Ft=String,Lt=TypeError;Bt=function(t){if(D(t))return t;throw Lt(Ft(t)+" is not an object")};var Ut=TypeError,qt=Object.defineProperty,Gt=Object.getOwnPropertyDescriptor;Mt=c?xt?function(t,e,r){if(Bt(t),e=M(e),Bt(r),"function"==typeof t&&"prototype"===e&&"value"in r&&"writable"in r&&!r.writable){var n=Gt(t,e);n&&n.writable&&(t[e]=r.value,r={configurable:"configurable"in r?r.configurable:n.configurable,enumerable:"enumerable"in r?r.enumerable:n.enumerable,writable:!1})}return qt(t,e,r)}:qt:function(t,e,r){if(Bt(t),e=M(e),Bt(r),Ct)try{return qt(t,e,r)}catch(t){}if("get"in r||"set"in r)throw Ut("Accessors not supported");return"value"in r&&(t[e]=r.value),t},kt=c?function(t,e,r){return Mt(t,e,h(1,r))}:function(t,e,r){return t[e]=r,t};var Jt,Wt,zt=Function.prototype,Ht=c&&Object.getOwnPropertyDescriptor,Vt=yt(zt,"name"),Yt={EXISTS:Vt,PROPER:Vt&&"something"===function(){}.name,CONFIGURABLE:Vt&&(!c||c&&Ht(zt,"name").configurable)}.CONFIGURABLE,$t={},Kt=g(Function.toString);k(lt.inspectSource)||(lt.inspectSource=function(t){return Kt(t)}),$t=lt.inspectSource;var Zt,Xt,Qt=i.WeakMap;Xt=k(Qt)&&/native code/.test(String(Qt));var te,ee=st("keys");te=function(t){return ee[t]||(ee[t]=gt(t))};var re={};re={};var ne,oe,ie,ae=i.TypeError,ce=i.WeakMap;if(Xt||lt.state){var ue=lt.state||(lt.state=new ce);ue.get=ue.get,ue.has=ue.has,ue.set=ue.set,ne=function(t,e){if(ue.has(t))throw ae("Object already initialized");return e.facade=t,ue.set(t,e),e},oe=function(t){return ue.get(t)||{}},ie=function(t){return ue.has(t)}}else{var se=te("state");re[se]=!0,ne=function(t,e){if(yt(t,se))throw ae("Object already initialized");return e.facade=t,kt(t,se,e),e},oe=function(t){return yt(t,se)?t[se]:{}},ie=function(t){return yt(t,se)}}var fe=(Zt={set:ne,get:oe,has:ie,enforce:function(t){return ie(t)?oe(t):ne(t,{})},getterFor:function(t){return function(e){var r;if(!D(e)||(r=oe(e)).type!==t)throw ae("Incompatible receiver, "+t+" required");return r}}}).enforce,le=Zt.get,pe=Object.defineProperty,ve=c&&!u((function(){return 8!==pe((function(){}),"length",{value:8}).length})),de=String(String).split("String"),ye=Wt=function(t,e,r){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!yt(t,"name")||Yt&&t.name!==e)&&(c?pe(t,"name",{value:e,configurable:!0}):t.name=e),ve&&r&&yt(r,"arity")&&t.length!==r.arity&&pe(t,"length",{value:r.arity});try{r&&yt(r,"constructor")&&r.constructor?c&&pe(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=fe(t);return yt(n,"source")||(n.source=de.join("string"==typeof e?e:"")),t};Function.prototype.toString=ye((function(){return k(this)&&le(this).source||$t(this)}),"toString"),Jt=function(t,e,r,n){n||(n={});var o=n.enumerable,i=void 0!==n.name?n.name:e;if(k(r)&&Wt(r,i,n),n.global)o?t[e]=r:ft(e,r);else{try{n.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=r:Mt(t,e,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return t};var he,me,ge,be,we,Se={},je={},Te=Math.ceil,Ee=Math.floor;je=Math.trunc||function(t){var e=+t;return(e>0?Ee:Te)(e)},we=function(t){var e=+t;return e!=e||0===e?0:je(e)};var Oe=Math.max,Ae=Math.min;be=function(t,e){var r=we(t);return r<0?Oe(r+e,0):Ae(r,e)};var Pe,Ce,Ie=Math.min;Ce=function(t){return t>0?Ie(we(t),9007199254740991):0},Pe=function(t){return Ce(t.length)};var Re=function(t){return function(e,r,n){var o,i=m(e),a=Pe(i),c=be(n,a);if(t&&r!=r){for(;a>c;)if((o=i[c++])!=o)return!0}else for(;a>c;c++)if((t||c in i)&&i[c]===r)return t||c||0;return!t&&-1}},_e={includes:Re(!0),indexOf:Re(!1)}.indexOf,Me=g([].push);ge=function(t,e){var r,n=m(t),o=0,i=[];for(r in n)!yt(re,r)&&yt(n,r)&&Me(i,r);for(;e.length>o;)yt(n,r=e[o++])&&(~_e(i,r)||Me(i,r));return i};var xe,Ne={},De=(Ne=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]).concat("length","prototype");me=Object.getOwnPropertyNames||function(t){return ge(t,De)},xe=Object.getOwnPropertySymbols;var ke=g([].concat);Se=U("Reflect","ownKeys")||function(t){var e=me(Bt(t));return xe?ke(e,xe(t)):e},he=function(t,e,r){for(var n=Se(e),i=Mt,a=o,c=0;c<n.length;c++){var u=n[c];yt(t,u)||r&&yt(r,u)||i(t,u,a(e,u))}};var Be={},Fe=/#|\.prototype\./,Le=function(t,e){var r=qe[Ue(t)];return r==Je||r!=Ge&&(k(e)?u(e):!!e)},Ue=Le.normalize=function(t){return String(t).replace(Fe,".").toLowerCase()},qe=Le.data={},Ge=Le.NATIVE="N",Je=Le.POLYFILL="P";Be=Le,n=function(t,e){var r,n,o,a,c,u=t.target,s=t.global,f=t.stat;if(r=s?i:f?i[u]||ft(u,{}):(i[u]||{}).prototype)for(n in e){if(a=e[n],o=t.dontCallGetSet?(c=Dt(r,n))&&c.value:r[n],!Be(s?n:u+(f?".":"#")+n,t.forced)&&void 0!==o){if(typeof a==typeof o)continue;he(a,o)}(t.sham||o&&o.sham)&&kt(a,"sham",!0),Jt(r,n,a,t)}};var We,ze,He={},Ve={};Ve[ut("toStringTag")]="z",ze="[object z]"===String(Ve);var Ye=ut("toStringTag"),$e=Object,Ke="Arguments"==b(function(){return arguments}());He=ze?b:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=$e(t),Ye))?r:Ke?b(e):"Object"==(n=b(e))&&k(e.callee)?"Arguments":n};var Ze=String;We=function(t){if("Symbol"===He(t))throw TypeError("Cannot convert a Symbol value to a string");return Ze(t)};var Xe=Mt,Qe=i.Symbol,tr=Qe&&Qe.prototype;if(c&&k(Qe)&&(!("description"in tr)||void 0!==Qe().description)){var er={},rr=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:We(arguments[0]),e=J(tr,this)?new Qe(t):void 0===t?Qe():Qe(t);return""===t&&(er[e]=!0),e};he(rr,Qe),rr.prototype=tr,tr.constructor=rr;var nr="Symbol(test)"==String(Qe("test")),or=g(tr.valueOf),ir=g(tr.toString),ar=/^Symbol\((.*)\)[^)]+$/,cr=g("".replace),ur=g("".slice);Xe(tr,"description",{configurable:!0,get:function(){var t=or(this);if(yt(er,t))return"";var e=ir(t),r=nr?ur(e,7,-1):cr(e,ar,"$1");return""===r?void 0:r}}),n({global:!0,constructor:!0,forced:!0},{Symbol:rr})}var sr={},fr={};fr=Array.isArray||function(t){return"Array"==b(t)};var lr,pr=TypeError;lr=function(t){if(t>9007199254740991)throw pr("Maximum allowed index exceeded");return t};var vr,dr=g(g.bind);vr=function(t,e){return rt(t),void 0===e?t:s?dr(t,e):function(){return t.apply(e,arguments)}};var yr=function(t,e,r,n,o,i,a,c){for(var u,s,f=o,l=0,p=!!a&&vr(a,c);l<n;)l in r&&(u=p?p(r[l],l,e):r[l],i>0&&fr(u)?(s=Pe(u),f=yr(t,e,u,s,f,i-1)-1):(lr(f+1),t[f]=u),f++),l++;return f};sr=yr;var hr,mr,gr={},br=function(){},wr=[],Sr=U("Reflect","construct"),jr=/^\s*(?:class|function)\b/,Tr=g(jr.exec),Er=!jr.exec(br),Or=function(t){if(!k(t))return!1;try{return Sr(br,wr,t),!0}catch(t){return!1}},Ar=function(t){if(!k(t))return!1;switch(He(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Er||!!Tr(jr,$t(t))}catch(t){return!0}};Ar.sham=!0,gr=!Sr||u((function(){var t;return Or(Or.call)||!Or(Object)||!Or((function(){t=!0}))||t}))?Ar:Or;var Pr=ut("species"),Cr=Array;mr=function(t){var e;return fr(t)&&(e=t.constructor,(gr(e)&&(e===Cr||fr(e.prototype))||D(e)&&null===(e=e[Pr]))&&(e=void 0)),void 0===e?Cr:e},hr=function(t,e){return new(mr(t))(0===e?0:e)},n({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=dt(this),r=Pe(e),n=hr(e,0);return n.length=sr(n,e,e,r,0,void 0===t?1:we(t)),n}}),n({target:"Array",proto:!0},{flatMap:function(t){var e,r=dt(this),n=Pe(r);return rt(t),(e=hr(r,0)).length=sr(e,r,r,n,0,1,t,arguments.length>1?arguments[1]:void 0),e}});var Ir,Rr=TypeError;Ir=function(t,e){if(!delete t[e])throw Rr("Cannot delete property "+nt(e)+" of "+nt(t))};var _r,Mr,xr={};Mr=function(t,e,r){var n=M(e);n in t?Mt(t,n,h(0,r)):t[n]=r};var Nr=Array,Dr=Math.max;_r=function(t,e,r){for(var n=Pe(t),o=be(e,n),i=be(void 0===r?n:r,n),a=Nr(Dr(i-o,0)),c=0;o<i;o++,c++)Mr(a,c,t[o]);return a.length=c,a};var kr=Math.floor,Br=function(t,e){var r=t.length,n=kr(r/2);return r<8?Fr(t,e):Lr(t,Br(_r(t,0,n),e),Br(_r(t,n),e),e)},Fr=function(t,e){for(var r,n,o=t.length,i=1;i<o;){for(n=i,r=t[i];n&&e(t[n-1],r)>0;)t[n]=t[--n];n!==i++&&(t[n]=r)}return t},Lr=function(t,e,r,n){for(var o=e.length,i=r.length,a=0,c=0;a<o||c<i;)t[a+c]=a<o&&c<i?n(e[a],r[c])<=0?e[a++]:r[c++]:a<o?e[a++]:r[c++];return t};xr=Br;var Ur;Ur=function(t,e){var r=[][t];return!!r&&u((function(){r.call(null,e||function(){return 1},1)}))};var qr,Gr=V.match(/firefox\/(\d+)/i);qr=!!Gr&&+Gr[1];var Jr;Jr=/MSIE|Trident/.test(V);var Wr,zr=V.match(/AppleWebKit\/(\d+)\./);Wr=!!zr&&+zr[1];var Hr=[],Vr=g(Hr.sort),Yr=g(Hr.push),$r=u((function(){Hr.sort(void 0)})),Kr=u((function(){Hr.sort(null)})),Zr=Ur("sort"),Xr=!u((function(){if(H)return H<70;if(!(qr&&qr>3)){if(Jr)return!0;if(Wr)return Wr<603;var t,e,r,n,o="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)Hr.push({k:e+n,v:r})}for(Hr.sort((function(t,e){return e.v-t.v})),n=0;n<Hr.length;n++)e=Hr[n].k.charAt(0),o.charAt(o.length-1)!==e&&(o+=e);return"DGBEFHACIJK"!==o}}));n({target:"Array",proto:!0,forced:$r||!Kr||!Zr||!Xr},{sort:function(t){void 0!==t&&rt(t);var e=dt(this);if(Xr)return void 0===t?Vr(e):Vr(e,t);var r,n,o=[],i=Pe(e);for(n=0;n<i;n++)n in e&&Yr(o,e[n]);for(xr(o,function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:We(e)>We(r)?1:-1}}(t)),r=Pe(o),n=0;n<r;)e[n]=o[n++];for(;n<i;)Ir(e,n++);return e}});var Qr,tn,en={},rn={};rn=Object.keys||function(t){return ge(t,Ne)},tn=c&&!xt?Object.defineProperties:function(t,e){Bt(t);for(var r,n=m(e),o=rn(e),i=o.length,a=0;i>a;)Mt(t,r=o[a++],n[r]);return t};var nn={};nn=U("document","documentElement");var on,an=te("IE_PROTO"),cn=function(){},un=function(t){return"<script>"+t+"<\/script>"},sn=function(t){t.write(un("")),t.close();var e=t.parentWindow.Object;return t=null,e},fn=function(){try{on=new ActiveXObject("htmlfile")}catch(t){}var t,e;fn="undefined"!=typeof document?document.domain&&on?sn(on):((e=It("iframe")).style.display="none",nn.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(un("document.F=Object")),t.close(),t.F):sn(on);for(var r=Ne.length;r--;)delete fn.prototype[Ne[r]];return fn()};re[an]=!0,en=Object.create||function(t,e){var r;return null!==t?(cn.prototype=Bt(t),r=new cn,cn.prototype=null,r[an]=t):r=fn(),void 0===e?r:tn(r,e)};var ln=Mt,pn=ut("unscopables"),vn=Array.prototype;null==vn[pn]&&ln(vn,pn,{configurable:!0,value:en(null)}),(Qr=function(t){vn[pn][t]=!0})("flat"),Qr("flatMap");var dn=Math.hypot,yn=Math.abs,hn=Math.sqrt;n({target:"Math",stat:!0,arity:2,forced:!!dn&&dn(1/0,NaN)!==1/0},{hypot:function(t,e){for(var r,n,o=0,i=0,a=arguments.length,c=0;i<a;)c<(r=yn(arguments[i++]))?(o=o*(n=c/r)*n+1,c=r):o+=r>0?(n=r/c)*n:r;return c===1/0?1/0:c*hn(o)}});var mn,gn,bn;bn={};var wn=ut("iterator"),Sn=Array.prototype;gn=function(t){return void 0!==t&&(bn.Array===t||Sn[wn]===t)};var jn,Tn,En=ut("iterator");Tn=function(t){if(!R(t))return et(t,En)||et(t,"@@iterator")||bn[He(t)]};var On=TypeError;jn=function(t,e){var r=arguments.length<2?Tn(t):e;if(rt(r))return Bt(f(r,t));throw On(nt(t)+" is not iterable")};var An;An=function(t,e,r){var n,o;Bt(t);try{if(!(n=et(t,"return"))){if("throw"===e)throw r;return r}n=f(n,t)}catch(t){o=!0,n=t}if("throw"===e)throw r;if(o)throw n;return Bt(n),r};var Pn=TypeError,Cn=function(t,e){this.stopped=t,this.result=e},In=Cn.prototype;mn=function(t,e,r){var n,o,i,a,c,u,s,l=r&&r.that,p=!(!r||!r.AS_ENTRIES),v=!(!r||!r.IS_RECORD),d=!(!r||!r.IS_ITERATOR),y=!(!r||!r.INTERRUPTED),h=vr(e,l),m=function(t){return n&&An(n,"normal",t),new Cn(!0,t)},g=function(t){return p?(Bt(t),y?h(t[0],t[1],m):h(t[0],t[1])):y?h(t,m):h(t)};if(v)n=t.iterator;else if(d)n=t;else{if(!(o=Tn(t)))throw Pn(nt(t)+" is not iterable");if(gn(o)){for(i=0,a=Pe(t);a>i;i++)if((c=g(t[i]))&&J(In,c))return c;return new Cn(!1)}n=jn(t,o)}for(u=v?t.next:n.next;!(s=f(u,n)).done;){try{c=g(s.value)}catch(t){An(n,"throw",t)}if("object"==typeof c&&c&&J(In,c))return c}return new Cn(!1)},n({target:"Object",stat:!0},{fromEntries:function(t){var e={};return mn(t,(function(t,r){Mr(e,t,r)}),{AS_ENTRIES:!0}),e}});var Rn;Rn="process"==b(i.process);var _n,Mn={},xn=String,Nn=TypeError;_n=function(t){if("object"==typeof t||k(t))return t;throw Nn("Can't set "+xn(t)+" as a prototype")},Mn=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=g(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return Bt(r),_n(n),e?t(r,n):r.__proto__=n,r}}():void 0);var Dn,kn=Mt,Bn=ut("toStringTag");Dn=function(t,e,r){t&&!r&&(t=t.prototype),t&&!yt(t,Bn)&&kn(t,Bn,{configurable:!0,value:e})};var Fn,Ln=ut("species");Fn=function(t){var e=U(t),r=Mt;c&&e&&!e[Ln]&&r(e,Ln,{configurable:!0,get:function(){return this}})};var Un,qn=TypeError;Un=function(t,e){if(J(e,t))return t;throw qn("Incorrect invocation")};var Gn,Jn,Wn=TypeError;Jn=function(t){if(gr(t))return t;throw Wn(nt(t)+" is not a constructor")};var zn=ut("species");Gn=function(t,e){var r,n=Bt(t).constructor;return void 0===n||R(r=Bt(n)[zn])?e:Jn(r)};var Hn,Vn={},Yn=Function.prototype,$n=Yn.apply,Kn=Yn.call;Vn="object"==typeof Reflect&&Reflect.apply||(s?Kn.bind($n):function(){return Kn.apply($n,arguments)});var Zn={};Zn=g([].slice);var Xn,Qn=TypeError;Xn=function(t,e){if(t<e)throw Qn("Not enough arguments");return t};var to;to=/(?:ipad|iphone|ipod).*applewebkit/i.test(V);var eo,ro,no,oo,io=i.setImmediate,ao=i.clearImmediate,co=i.process,uo=i.Dispatch,so=i.Function,fo=i.MessageChannel,lo=i.String,po=0,vo={};try{eo=i.location}catch(t){}var yo=function(t){if(yt(vo,t)){var e=vo[t];delete vo[t],e()}},ho=function(t){return function(){yo(t)}},mo=function(t){yo(t.data)},go=function(t){i.postMessage(lo(t),eo.protocol+"//"+eo.host)};io&&ao||(io=function(t){Xn(arguments.length,1);var e=k(t)?t:so(t),r=Zn(arguments,1);return vo[++po]=function(){Vn(e,void 0,r)},ro(po),po},ao=function(t){delete vo[t]},Rn?ro=function(t){co.nextTick(ho(t))}:uo&&uo.now?ro=function(t){uo.now(ho(t))}:fo&&!to?(oo=(no=new fo).port2,no.port1.onmessage=mo,ro=vr(oo.postMessage,oo)):i.addEventListener&&k(i.postMessage)&&!i.importScripts&&eo&&"file:"!==eo.protocol&&!u(go)?(ro=go,i.addEventListener("message",mo,!1)):ro="onreadystatechange"in It("script")?function(t){nn.appendChild(It("script")).onreadystatechange=function(){nn.removeChild(this),yo(t)}}:function(t){setTimeout(ho(t),0)});var bo,wo=(Hn={set:io,clear:ao}).set,So={},jo=o,To=Hn.set;bo=/ipad|iphone|ipod/i.test(V)&&void 0!==i.Pebble;var Eo;Eo=/web0s(?!.*chrome)/i.test(V);var Oo,Ao,Po,Co,Io,Ro,_o,Mo,xo=i.MutationObserver||i.WebKitMutationObserver,No=i.document,Do=i.process,ko=i.Promise,Bo=jo(i,"queueMicrotask"),Fo=Bo&&Bo.value;Fo||(Oo=function(){var t,e;for(Rn&&(t=Do.domain)&&t.exit();Ao;){e=Ao.fn,Ao=Ao.next;try{e()}catch(t){throw Ao?Co():Po=void 0,t}}Po=void 0,t&&t.enter()},to||Rn||Eo||!xo||!No?!bo&&ko&&ko.resolve?((_o=ko.resolve(void 0)).constructor=ko,Mo=vr(_o.then,_o),Co=function(){Mo(Oo)}):Rn?Co=function(){Do.nextTick(Oo)}:(To=vr(To,i),Co=function(){To(Oo)}):(Io=!0,Ro=No.createTextNode(""),new xo(Oo).observe(Ro,{characterData:!0}),Co=function(){Ro.data=Io=!Io})),So=Fo||function(t){var e={fn:t,next:void 0};Po&&(Po.next=e),Ao||(Ao=e,Co()),Po=e};var Lo;Lo=function(t,e){var r=i.console;r&&r.error&&(1==arguments.length?r.error(t):r.error(t,e))};var Uo;Uo=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}};var qo={},Go=function(){this.head=null,this.tail=null};Go.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},qo=Go;var Jo={};Jo=i.Promise;var Wo,zo,Ho;Ho="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,zo=!Ho&&!Rn&&"object"==typeof window&&"object"==typeof document;Jo&&Jo.prototype;var Vo,Yo=ut("species"),$o=!1,Ko=k(i.PromiseRejectionEvent);Wo={CONSTRUCTOR:Be("Promise",(function(){var t=$t(Jo),e=t!==String(Jo);if(!e&&66===H)return!0;if(!H||H<51||!/native code/.test(t)){var r=new Jo((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};if((r.constructor={})[Yo]=n,!($o=r.then((function(){}))instanceof n))return!0}return!e&&(zo||Ho)&&!Ko})),REJECTION_EVENT:Ko,SUBCLASSING:$o};var Zo=TypeError,Xo=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw Zo("Bad Promise constructor");e=t,r=n})),this.resolve=rt(e),this.reject=rt(r)};Vo=function(t){return new Xo(t)};var Qo,ti,ei,ri=Wo.CONSTRUCTOR,ni=Wo.REJECTION_EVENT,oi=Wo.SUBCLASSING,ii=Zt.getterFor("Promise"),ai=Zt.set,ci=Jo&&Jo.prototype,ui=Jo,si=ci,fi=i.TypeError,li=i.document,pi=i.process,vi=Vo,di=vi,yi=!!(li&&li.createEvent&&i.dispatchEvent),hi=function(t){var e;return!(!D(t)||!k(e=t.then))&&e},mi=function(t,e){var r,n,o,i=e.value,a=1==e.state,c=a?t.ok:t.fail,u=t.resolve,s=t.reject,l=t.domain;try{c?(a||(2===e.rejection&&ji(e),e.rejection=1),!0===c?r=i:(l&&l.enter(),r=c(i),l&&(l.exit(),o=!0)),r===t.promise?s(fi("Promise-chain cycle")):(n=hi(r))?f(n,r,u,s):u(r)):s(i)}catch(t){l&&!o&&l.exit(),s(t)}},gi=function(t,e){t.notified||(t.notified=!0,So((function(){for(var r,n=t.reactions;r=n.get();)mi(r,t);t.notified=!1,e&&!t.rejection&&wi(t)})))},bi=function(t,e,r){var n,o;yi?((n=li.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),i.dispatchEvent(n)):n={promise:e,reason:r},!ni&&(o=i["on"+t])?o(n):"unhandledrejection"===t&&Lo("Unhandled promise rejection",r)},wi=function(t){f(wo,i,(function(){var e,r=t.facade,n=t.value;if(Si(t)&&(e=Uo((function(){Rn?pi.emit("unhandledRejection",n,r):bi("unhandledrejection",r,n)})),t.rejection=Rn||Si(t)?2:1,e.error))throw e.value}))},Si=function(t){return 1!==t.rejection&&!t.parent},ji=function(t){f(wo,i,(function(){var e=t.facade;Rn?pi.emit("rejectionHandled",e):bi("rejectionhandled",e,t.value)}))},Ti=function(t,e,r){return function(n){t(e,n,r)}},Ei=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,gi(t,!0))},Oi=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw fi("Promise can't be resolved itself");var n=hi(e);n?So((function(){var r={done:!1};try{f(n,e,Ti(Oi,r,t),Ti(Ei,r,t))}catch(e){Ei(r,e,t)}})):(t.value=e,t.state=1,gi(t,!1))}catch(e){Ei({done:!1},e,t)}}};if(ri&&(si=(ui=function(t){Un(this,si),rt(t),f(Qo,this);var e=ii(this);try{t(Ti(Oi,e),Ti(Ei,e))}catch(t){Ei(e,t)}}).prototype,(Qo=function(t){ai(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new qo,rejection:!1,state:0,value:void 0})}).prototype=Jt(si,"then",(function(t,e){var r=ii(this),n=vi(Gn(this,ui));return r.parent=!0,n.ok=!k(t)||t,n.fail=k(e)&&e,n.domain=Rn?pi.domain:void 0,0==r.state?r.reactions.add(n):So((function(){mi(n,r)})),n.promise})),ti=function(){var t=new Qo,e=ii(t);this.promise=t,this.resolve=Ti(Oi,e),this.reject=Ti(Ei,e)},Vo=vi=function(t){return t===ui||undefined===t?new ti(t):di(t)},k(Jo)&&ci!==Object.prototype)){ei=ci.then,oi||Jt(ci,"then",(function(t,e){var r=this;return new ui((function(t,e){f(ei,r,t,e)})).then(t,e)}),{unsafe:!0});try{delete ci.constructor}catch(t){}Mn&&Mn(ci,si)}n({global:!0,constructor:!0,wrap:!0,forced:ri},{Promise:ui}),Dn(ui,"Promise",!1),Fn("Promise");var Ai,Pi=ut("iterator"),Ci=!1;try{var Ii=0,Ri={next:function(){return{done:!!Ii++}},return:function(){Ci=!0}};Ri[Pi]=function(){return this},Array.from(Ri,(function(){throw 2}))}catch(t){}n({target:"Promise",stat:!0,forced:Ai=Wo.CONSTRUCTOR||!function(t,e){if(!e&&!Ci)return!1;var r=!1;try{var n={};n[Pi]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r}((function(t){Jo.all(t).then(void 0,(function(){}))}))},{all:function(t){var e=this,r=Vo(e),n=r.resolve,o=r.reject,i=Uo((function(){var r=rt(e.resolve),i=[],a=0,c=1;mn(t,(function(t){var u=a++,s=!1;c++,f(r,e,t).then((function(t){s||(s=!0,i[u]=t,--c||n(i))}),o)})),--c||n(i)}));return i.error&&o(i.value),r.promise}});var _i=Wo.CONSTRUCTOR,Mi=Jo&&Jo.prototype;if(n({target:"Promise",proto:!0,forced:_i,real:!0},{catch:function(t){return this.then(void 0,t)}}),k(Jo)){var xi=U("Promise").prototype.catch;Mi.catch!==xi&&Jt(Mi,"catch",xi,{unsafe:!0})}n({target:"Promise",stat:!0,forced:Ai},{race:function(t){var e=this,r=Vo(e),n=r.reject,o=Uo((function(){var o=rt(e.resolve);mn(t,(function(t){f(o,e,t).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}}),n({target:"Promise",stat:!0,forced:Wo.CONSTRUCTOR},{reject:function(t){var e=Vo(this);return f(e.reject,void 0,t),e.promise}});var Ni,Di=Wo.CONSTRUCTOR;Ni=function(t,e){if(Bt(t),D(e)&&e.constructor===t)return e;var r=Vo(t);return(0,r.resolve)(e),r.promise};U("Promise");n({target:"Promise",stat:!0,forced:Di},{resolve:function(t){return Ni(this,t)}});var ki=Jo&&Jo.prototype;if(n({target:"Promise",proto:!0,real:!0,forced:!!Jo&&u((function(){ki.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=Gn(this,U("Promise")),r=k(t);return this.then(r?function(r){return Ni(e,t()).then((function(){return r}))}:t,r?function(r){return Ni(e,t()).then((function(){throw r}))}:t)}}),k(Jo)){var Bi=U("Promise").prototype.finally;ki.finally!==Bi&&Jt(ki,"finally",Bi,{unsafe:!0})}var Fi,Li;Li="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView;var Ui,qi=Mt,Gi={};Ui=!u((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}));var Ji=te("IE_PROTO"),Wi=Object,zi=Wi.prototype;Gi=Ui?Wi.getPrototypeOf:function(t){var e=dt(t);if(yt(e,Ji))return e[Ji];var r=e.constructor;return k(r)&&e instanceof r?r.prototype:e instanceof Wi?zi:null};var Hi,Vi,Yi,$i=Zt.enforce,Ki=Zt.get,Zi=i.Int8Array,Xi=Zi&&Zi.prototype,Qi=i.Uint8ClampedArray,ta=Qi&&Qi.prototype,ea=Zi&&Gi(Zi),ra=Xi&&Gi(Xi),na=Object.prototype,oa=i.TypeError,ia=ut("toStringTag"),aa=gt("TYPED_ARRAY_TAG"),ca=Li&&!!Mn&&"Opera"!==He(i.opera),ua=!1,sa={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},fa={BigInt64Array:8,BigUint64Array:8},la=function(t){var e=Gi(t);if(D(e)){var r=Ki(e);return r&&yt(r,"TypedArrayConstructor")?r.TypedArrayConstructor:la(e)}},pa=function(t){if(!D(t))return!1;var e=He(t);return yt(sa,e)||yt(fa,e)};for(Hi in sa)(Yi=(Vi=i[Hi])&&Vi.prototype)?$i(Yi).TypedArrayConstructor=Vi:ca=!1;for(Hi in fa)(Yi=(Vi=i[Hi])&&Vi.prototype)&&($i(Yi).TypedArrayConstructor=Vi);if((!ca||!k(ea)||ea===Function.prototype)&&(ea=function(){throw oa("Incorrect invocation")},ca))for(Hi in sa)i[Hi]&&Mn(i[Hi],ea);if((!ca||!ra||ra===na)&&(ra=ea.prototype,ca))for(Hi in sa)i[Hi]&&Mn(i[Hi].prototype,ra);if(ca&&Gi(ta)!==ra&&Mn(ta,ra),c&&!yt(ra,ia))for(Hi in ua=!0,qi(ra,ia,{get:function(){return D(this)?this[aa]:void 0}}),sa)i[Hi]&&kt(i[Hi],aa,Hi);Fi={NATIVE_ARRAY_BUFFER_VIEWS:ca,TYPED_ARRAY_TAG:ua&&aa,aTypedArray:function(t){if(pa(t))return t;throw oa("Target is not a typed array")},aTypedArrayConstructor:function(t){if(k(t)&&(!Mn||J(ea,t)))return t;throw oa(nt(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,r,n){if(c){if(r)for(var o in sa){var a=i[o];if(a&&yt(a.prototype,t))try{delete a.prototype[t]}catch(r){try{a.prototype[t]=e}catch(t){}}}ra[t]&&!r||Jt(ra,t,r?e:ca&&Xi[t]||e,n)}},exportTypedArrayStaticMethod:function(t,e,r){var n,o;if(c){if(Mn){if(r)for(n in sa)if((o=i[n])&&yt(o,t))try{delete o[t]}catch(t){}if(ea[t]&&!r)return;try{return Jt(ea,t,r?e:ca&&ea[t]||e)}catch(t){}}for(n in sa)!(o=i[n])||o[t]&&!r||Jt(o,t,e)}},getTypedArrayConstructor:la,isView:function(t){if(!D(t))return!1;var e=He(t);return"DataView"===e||yt(sa,e)||yt(fa,e)},isTypedArray:pa,TypedArray:ea,TypedArrayPrototype:ra};var va,da,ya=RangeError;da=function(t){var e=we(t);if(e<0)throw ya("The argument can't be less than 0");return e};var ha=RangeError;va=function(t,e){var r=da(t);if(r%e)throw ha("Wrong offset");return r};var ma=i.RangeError,ga=i.Int8Array,ba=ga&&ga.prototype,wa=ba&&ba.set,Sa=Fi.aTypedArray,ja=Fi.exportTypedArrayMethod,Ta=!u((function(){var t=new Uint8ClampedArray(2);return f(wa,t,{length:1,0:3},1),3!==t[1]})),Ea=Ta&&Fi.NATIVE_ARRAY_BUFFER_VIEWS&&u((function(){var t=new ga(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));ja("set",(function(t){Sa(this);var e=va(arguments.length>1?arguments[1]:void 0,1),r=dt(t);if(Ta)return f(wa,this,r,e);var n=this.length,o=Pe(r),i=0;if(o+e>n)throw ma("Wrong length");for(;i<o;)this[e+i]=r[i++]}),!Ta||Ea);var Oa=Fi.aTypedArray,Aa=Fi.exportTypedArrayMethod,Pa=i.Uint16Array,Ca=Pa&&g(Pa.prototype.sort),Ia=!(!Ca||u((function(){Ca(new Pa(2),null)}))&&u((function(){Ca(new Pa(2),{})}))),Ra=!!Ca&&!u((function(){if(H)return H<74;if(qr)return qr<67;if(Jr)return!0;if(Wr)return Wr<602;var t,e,r=new Pa(516),n=Array(516);for(t=0;t<516;t++)e=t%4,r[t]=515-t,n[t]=t-2*e+3;for(Ca(r,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(r[t]!==n[t])return!0}));Aa("sort",(function(t){return void 0!==t&&rt(t),Ra?Ca(this,t):xr(Oa(this),function(t){return function(e,r){return void 0!==t?+t(e,r)||0:r!=r?-1:e!=e?1:0===e&&0===r?1/e>0&&1/r<0?1:-1:e>r}}(t))}),!Ra||Ia);var _a=i.process;n({global:!0,enumerable:!0,dontCallGetSet:!0},{queueMicrotask:function(t){Xn(arguments.length,1),rt(t);var e=Rn&&_a.domain;So(e?e.bind(t):t)}});const Ma=()=>{const t=document.querySelector(".alert");t&&t.parentElement.removeChild(t)},xa=(t,e)=>{Ma();const r=`<div class="alert alert--${t}">${e}</div>`;document.querySelector("body").insertAdjacentHTML("afterbegin",r),window.setTimeout(Ma,5e3)},Na=async(e,n)=>{const o=await r(t)("/api/v1/users/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:n})}),i=await o.json();"success"===i.status?(xa("success","You are now logged in"),setTimeout((()=>{location.assign("/")}),1e3)):xa("error",i.message)},Da=async(e,n,o,i)=>{const a=await r(t)("/api/v1/users/signup",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:e,email:n,password:o,passwordConfirm:i})}),c=await a.json();"success"===c.status?(xa("success","You now have an account"),setTimeout((()=>{location.assign("/")}),1e3)):xa("error",c.message)},ka=t=>{mapboxgl.accessToken="pk.eyJ1IjoiamRlZWphdCIsImEiOiJjbDdkN3J5bncwazhvM3ZvbDJ3Mjl3dGh2In0.MqeSMRvJZuR5gu7Ndwww-A";const e=new mapboxgl.Map({container:"map",style:"mapbox://styles/jdeejat/cj20he7w700402rmjs5zfkwlj",cooperativeGestures:!0});e.on("style.load",(()=>{e.setFog({})})),e.addControl(new mapboxgl.FullscreenControl);const r=new mapboxgl.LngLatBounds;t.forEach((t=>{const n=document.createElement("div");n.className="marker",new mapboxgl.Marker({element:n,anchor:"bottom"}).setLngLat(t.coordinates).setPopup(new mapboxgl.Popup({offset:25}).setHTML(`<a href='${t.googleMapsLink}' target="_blank">${t.pointName}</a>`)).addTo(e),r.extend(t.coordinates)})),e.fitBounds(r,{padding:{top:200,bottom:150,left:100,right:100}})},Ba=async(e,n)=>{const o=await r(t)("/api/v1/users/updateMe",{method:"PATCH",body:e}),i=await o.json();"success"===i.status?xa("success","Data updated"):xa("error",i.message)},Fa=async(e,n,o)=>{const i=await r(t)("/api/v1/users/updatePassword",{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({currentPassword:e,newPassword:n,newPasswordConfirm:o})}),a=await i.json();"success"===a.status?xa("success","Password updated"):xa("error",a.message)},La=async(e=0,n=9)=>{const o=await r(t)(`/?limit=${n}&page=${e}`,{method:"GET"});return await o.text()},Ua=document.getElementById("map"),qa=document.querySelector(".form--login"),Ga=document.querySelector(".form--signup"),Ja=document.querySelector(".nav__el--logout"),Wa=document.querySelector(".form-user-data"),za=document.querySelector(".form-user-password"),Ha=document.getElementById("load-more");if(Ua){ka(JSON.parse(Ua.dataset.locations))}qa&&qa.addEventListener("submit",(t=>{t.preventDefault();const e=document.getElementById("email").value,r=document.getElementById("password").value;Na(e,r)})),Ga&&Ga.addEventListener("submit",(t=>{t.preventDefault();const e=document.getElementById("name").value,r=document.getElementById("email").value,n=document.getElementById("password").value,o=document.getElementById("passwordConfirm").value;Da(e,r,n,o)})),Ja&&Ja.addEventListener("click",(async()=>{const e=await r(t)("/api/v1/users/logout",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});"success"===(await e.json()).status?(xa("success","You are now logged out"),setTimeout((()=>{location.reload(!0)}),2e3)):xa("error","Something went wrong. Try again!")})),Wa&&Wa.addEventListener("submit",(t=>{t.preventDefault();const e=new FormData;e.append("name",document.getElementById("name").value),e.append("email",document.getElementById("email").value),e.append("photo",document.getElementById("photo").files[0]),Ba(e)})),za&&za.addEventListener("submit",(async t=>{t.preventDefault(),document.querySelector(".btn--save-password").textContent="Updating...";const e=document.getElementById("password-current").value,r=document.getElementById("password").value,n=document.getElementById("password-confirm").value;await Fa(e,r,n),document.querySelector(".btn--save-password").textContent="Save password",document.getElementById("password-current").value="",document.getElementById("password").value="",document.getElementById("password-confirm").value=""})),Ha&&Ha.addEventListener("click",(async()=>{const t=1*Ha.dataset.page+1,e=await La(t);document.querySelector(".card-container").insertAdjacentHTML("beforeend",e),Ha.dataset.page=t}));
//# sourceMappingURL=index.js.map
